webpackJsonp(["main"],{

/***/ "./node_modules/moment/locale recursive ^\\.\\/.*$":
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./af": "./node_modules/moment/locale/af.js",
	"./af.js": "./node_modules/moment/locale/af.js",
	"./ar": "./node_modules/moment/locale/ar.js",
	"./ar-dz": "./node_modules/moment/locale/ar-dz.js",
	"./ar-dz.js": "./node_modules/moment/locale/ar-dz.js",
	"./ar-kw": "./node_modules/moment/locale/ar-kw.js",
	"./ar-kw.js": "./node_modules/moment/locale/ar-kw.js",
	"./ar-ly": "./node_modules/moment/locale/ar-ly.js",
	"./ar-ly.js": "./node_modules/moment/locale/ar-ly.js",
	"./ar-ma": "./node_modules/moment/locale/ar-ma.js",
	"./ar-ma.js": "./node_modules/moment/locale/ar-ma.js",
	"./ar-sa": "./node_modules/moment/locale/ar-sa.js",
	"./ar-sa.js": "./node_modules/moment/locale/ar-sa.js",
	"./ar-tn": "./node_modules/moment/locale/ar-tn.js",
	"./ar-tn.js": "./node_modules/moment/locale/ar-tn.js",
	"./ar.js": "./node_modules/moment/locale/ar.js",
	"./az": "./node_modules/moment/locale/az.js",
	"./az.js": "./node_modules/moment/locale/az.js",
	"./be": "./node_modules/moment/locale/be.js",
	"./be.js": "./node_modules/moment/locale/be.js",
	"./bg": "./node_modules/moment/locale/bg.js",
	"./bg.js": "./node_modules/moment/locale/bg.js",
	"./bm": "./node_modules/moment/locale/bm.js",
	"./bm.js": "./node_modules/moment/locale/bm.js",
	"./bn": "./node_modules/moment/locale/bn.js",
	"./bn.js": "./node_modules/moment/locale/bn.js",
	"./bo": "./node_modules/moment/locale/bo.js",
	"./bo.js": "./node_modules/moment/locale/bo.js",
	"./br": "./node_modules/moment/locale/br.js",
	"./br.js": "./node_modules/moment/locale/br.js",
	"./bs": "./node_modules/moment/locale/bs.js",
	"./bs.js": "./node_modules/moment/locale/bs.js",
	"./ca": "./node_modules/moment/locale/ca.js",
	"./ca.js": "./node_modules/moment/locale/ca.js",
	"./cs": "./node_modules/moment/locale/cs.js",
	"./cs.js": "./node_modules/moment/locale/cs.js",
	"./cv": "./node_modules/moment/locale/cv.js",
	"./cv.js": "./node_modules/moment/locale/cv.js",
	"./cy": "./node_modules/moment/locale/cy.js",
	"./cy.js": "./node_modules/moment/locale/cy.js",
	"./da": "./node_modules/moment/locale/da.js",
	"./da.js": "./node_modules/moment/locale/da.js",
	"./de": "./node_modules/moment/locale/de.js",
	"./de-at": "./node_modules/moment/locale/de-at.js",
	"./de-at.js": "./node_modules/moment/locale/de-at.js",
	"./de-ch": "./node_modules/moment/locale/de-ch.js",
	"./de-ch.js": "./node_modules/moment/locale/de-ch.js",
	"./de.js": "./node_modules/moment/locale/de.js",
	"./dv": "./node_modules/moment/locale/dv.js",
	"./dv.js": "./node_modules/moment/locale/dv.js",
	"./el": "./node_modules/moment/locale/el.js",
	"./el.js": "./node_modules/moment/locale/el.js",
	"./en-SG": "./node_modules/moment/locale/en-SG.js",
	"./en-SG.js": "./node_modules/moment/locale/en-SG.js",
	"./en-au": "./node_modules/moment/locale/en-au.js",
	"./en-au.js": "./node_modules/moment/locale/en-au.js",
	"./en-ca": "./node_modules/moment/locale/en-ca.js",
	"./en-ca.js": "./node_modules/moment/locale/en-ca.js",
	"./en-gb": "./node_modules/moment/locale/en-gb.js",
	"./en-gb.js": "./node_modules/moment/locale/en-gb.js",
	"./en-ie": "./node_modules/moment/locale/en-ie.js",
	"./en-ie.js": "./node_modules/moment/locale/en-ie.js",
	"./en-il": "./node_modules/moment/locale/en-il.js",
	"./en-il.js": "./node_modules/moment/locale/en-il.js",
	"./en-nz": "./node_modules/moment/locale/en-nz.js",
	"./en-nz.js": "./node_modules/moment/locale/en-nz.js",
	"./eo": "./node_modules/moment/locale/eo.js",
	"./eo.js": "./node_modules/moment/locale/eo.js",
	"./es": "./node_modules/moment/locale/es.js",
	"./es-do": "./node_modules/moment/locale/es-do.js",
	"./es-do.js": "./node_modules/moment/locale/es-do.js",
	"./es-us": "./node_modules/moment/locale/es-us.js",
	"./es-us.js": "./node_modules/moment/locale/es-us.js",
	"./es.js": "./node_modules/moment/locale/es.js",
	"./et": "./node_modules/moment/locale/et.js",
	"./et.js": "./node_modules/moment/locale/et.js",
	"./eu": "./node_modules/moment/locale/eu.js",
	"./eu.js": "./node_modules/moment/locale/eu.js",
	"./fa": "./node_modules/moment/locale/fa.js",
	"./fa.js": "./node_modules/moment/locale/fa.js",
	"./fi": "./node_modules/moment/locale/fi.js",
	"./fi.js": "./node_modules/moment/locale/fi.js",
	"./fo": "./node_modules/moment/locale/fo.js",
	"./fo.js": "./node_modules/moment/locale/fo.js",
	"./fr": "./node_modules/moment/locale/fr.js",
	"./fr-ca": "./node_modules/moment/locale/fr-ca.js",
	"./fr-ca.js": "./node_modules/moment/locale/fr-ca.js",
	"./fr-ch": "./node_modules/moment/locale/fr-ch.js",
	"./fr-ch.js": "./node_modules/moment/locale/fr-ch.js",
	"./fr.js": "./node_modules/moment/locale/fr.js",
	"./fy": "./node_modules/moment/locale/fy.js",
	"./fy.js": "./node_modules/moment/locale/fy.js",
	"./ga": "./node_modules/moment/locale/ga.js",
	"./ga.js": "./node_modules/moment/locale/ga.js",
	"./gd": "./node_modules/moment/locale/gd.js",
	"./gd.js": "./node_modules/moment/locale/gd.js",
	"./gl": "./node_modules/moment/locale/gl.js",
	"./gl.js": "./node_modules/moment/locale/gl.js",
	"./gom-latn": "./node_modules/moment/locale/gom-latn.js",
	"./gom-latn.js": "./node_modules/moment/locale/gom-latn.js",
	"./gu": "./node_modules/moment/locale/gu.js",
	"./gu.js": "./node_modules/moment/locale/gu.js",
	"./he": "./node_modules/moment/locale/he.js",
	"./he.js": "./node_modules/moment/locale/he.js",
	"./hi": "./node_modules/moment/locale/hi.js",
	"./hi.js": "./node_modules/moment/locale/hi.js",
	"./hr": "./node_modules/moment/locale/hr.js",
	"./hr.js": "./node_modules/moment/locale/hr.js",
	"./hu": "./node_modules/moment/locale/hu.js",
	"./hu.js": "./node_modules/moment/locale/hu.js",
	"./hy-am": "./node_modules/moment/locale/hy-am.js",
	"./hy-am.js": "./node_modules/moment/locale/hy-am.js",
	"./id": "./node_modules/moment/locale/id.js",
	"./id.js": "./node_modules/moment/locale/id.js",
	"./is": "./node_modules/moment/locale/is.js",
	"./is.js": "./node_modules/moment/locale/is.js",
	"./it": "./node_modules/moment/locale/it.js",
	"./it-ch": "./node_modules/moment/locale/it-ch.js",
	"./it-ch.js": "./node_modules/moment/locale/it-ch.js",
	"./it.js": "./node_modules/moment/locale/it.js",
	"./ja": "./node_modules/moment/locale/ja.js",
	"./ja.js": "./node_modules/moment/locale/ja.js",
	"./jv": "./node_modules/moment/locale/jv.js",
	"./jv.js": "./node_modules/moment/locale/jv.js",
	"./ka": "./node_modules/moment/locale/ka.js",
	"./ka.js": "./node_modules/moment/locale/ka.js",
	"./kk": "./node_modules/moment/locale/kk.js",
	"./kk.js": "./node_modules/moment/locale/kk.js",
	"./km": "./node_modules/moment/locale/km.js",
	"./km.js": "./node_modules/moment/locale/km.js",
	"./kn": "./node_modules/moment/locale/kn.js",
	"./kn.js": "./node_modules/moment/locale/kn.js",
	"./ko": "./node_modules/moment/locale/ko.js",
	"./ko.js": "./node_modules/moment/locale/ko.js",
	"./ku": "./node_modules/moment/locale/ku.js",
	"./ku.js": "./node_modules/moment/locale/ku.js",
	"./ky": "./node_modules/moment/locale/ky.js",
	"./ky.js": "./node_modules/moment/locale/ky.js",
	"./lb": "./node_modules/moment/locale/lb.js",
	"./lb.js": "./node_modules/moment/locale/lb.js",
	"./lo": "./node_modules/moment/locale/lo.js",
	"./lo.js": "./node_modules/moment/locale/lo.js",
	"./lt": "./node_modules/moment/locale/lt.js",
	"./lt.js": "./node_modules/moment/locale/lt.js",
	"./lv": "./node_modules/moment/locale/lv.js",
	"./lv.js": "./node_modules/moment/locale/lv.js",
	"./me": "./node_modules/moment/locale/me.js",
	"./me.js": "./node_modules/moment/locale/me.js",
	"./mi": "./node_modules/moment/locale/mi.js",
	"./mi.js": "./node_modules/moment/locale/mi.js",
	"./mk": "./node_modules/moment/locale/mk.js",
	"./mk.js": "./node_modules/moment/locale/mk.js",
	"./ml": "./node_modules/moment/locale/ml.js",
	"./ml.js": "./node_modules/moment/locale/ml.js",
	"./mn": "./node_modules/moment/locale/mn.js",
	"./mn.js": "./node_modules/moment/locale/mn.js",
	"./mr": "./node_modules/moment/locale/mr.js",
	"./mr.js": "./node_modules/moment/locale/mr.js",
	"./ms": "./node_modules/moment/locale/ms.js",
	"./ms-my": "./node_modules/moment/locale/ms-my.js",
	"./ms-my.js": "./node_modules/moment/locale/ms-my.js",
	"./ms.js": "./node_modules/moment/locale/ms.js",
	"./mt": "./node_modules/moment/locale/mt.js",
	"./mt.js": "./node_modules/moment/locale/mt.js",
	"./my": "./node_modules/moment/locale/my.js",
	"./my.js": "./node_modules/moment/locale/my.js",
	"./nb": "./node_modules/moment/locale/nb.js",
	"./nb.js": "./node_modules/moment/locale/nb.js",
	"./ne": "./node_modules/moment/locale/ne.js",
	"./ne.js": "./node_modules/moment/locale/ne.js",
	"./nl": "./node_modules/moment/locale/nl.js",
	"./nl-be": "./node_modules/moment/locale/nl-be.js",
	"./nl-be.js": "./node_modules/moment/locale/nl-be.js",
	"./nl.js": "./node_modules/moment/locale/nl.js",
	"./nn": "./node_modules/moment/locale/nn.js",
	"./nn.js": "./node_modules/moment/locale/nn.js",
	"./pa-in": "./node_modules/moment/locale/pa-in.js",
	"./pa-in.js": "./node_modules/moment/locale/pa-in.js",
	"./pl": "./node_modules/moment/locale/pl.js",
	"./pl.js": "./node_modules/moment/locale/pl.js",
	"./pt": "./node_modules/moment/locale/pt.js",
	"./pt-br": "./node_modules/moment/locale/pt-br.js",
	"./pt-br.js": "./node_modules/moment/locale/pt-br.js",
	"./pt.js": "./node_modules/moment/locale/pt.js",
	"./ro": "./node_modules/moment/locale/ro.js",
	"./ro.js": "./node_modules/moment/locale/ro.js",
	"./ru": "./node_modules/moment/locale/ru.js",
	"./ru.js": "./node_modules/moment/locale/ru.js",
	"./sd": "./node_modules/moment/locale/sd.js",
	"./sd.js": "./node_modules/moment/locale/sd.js",
	"./se": "./node_modules/moment/locale/se.js",
	"./se.js": "./node_modules/moment/locale/se.js",
	"./si": "./node_modules/moment/locale/si.js",
	"./si.js": "./node_modules/moment/locale/si.js",
	"./sk": "./node_modules/moment/locale/sk.js",
	"./sk.js": "./node_modules/moment/locale/sk.js",
	"./sl": "./node_modules/moment/locale/sl.js",
	"./sl.js": "./node_modules/moment/locale/sl.js",
	"./sq": "./node_modules/moment/locale/sq.js",
	"./sq.js": "./node_modules/moment/locale/sq.js",
	"./sr": "./node_modules/moment/locale/sr.js",
	"./sr-cyrl": "./node_modules/moment/locale/sr-cyrl.js",
	"./sr-cyrl.js": "./node_modules/moment/locale/sr-cyrl.js",
	"./sr.js": "./node_modules/moment/locale/sr.js",
	"./ss": "./node_modules/moment/locale/ss.js",
	"./ss.js": "./node_modules/moment/locale/ss.js",
	"./sv": "./node_modules/moment/locale/sv.js",
	"./sv.js": "./node_modules/moment/locale/sv.js",
	"./sw": "./node_modules/moment/locale/sw.js",
	"./sw.js": "./node_modules/moment/locale/sw.js",
	"./ta": "./node_modules/moment/locale/ta.js",
	"./ta.js": "./node_modules/moment/locale/ta.js",
	"./te": "./node_modules/moment/locale/te.js",
	"./te.js": "./node_modules/moment/locale/te.js",
	"./tet": "./node_modules/moment/locale/tet.js",
	"./tet.js": "./node_modules/moment/locale/tet.js",
	"./tg": "./node_modules/moment/locale/tg.js",
	"./tg.js": "./node_modules/moment/locale/tg.js",
	"./th": "./node_modules/moment/locale/th.js",
	"./th.js": "./node_modules/moment/locale/th.js",
	"./tl-ph": "./node_modules/moment/locale/tl-ph.js",
	"./tl-ph.js": "./node_modules/moment/locale/tl-ph.js",
	"./tlh": "./node_modules/moment/locale/tlh.js",
	"./tlh.js": "./node_modules/moment/locale/tlh.js",
	"./tr": "./node_modules/moment/locale/tr.js",
	"./tr.js": "./node_modules/moment/locale/tr.js",
	"./tzl": "./node_modules/moment/locale/tzl.js",
	"./tzl.js": "./node_modules/moment/locale/tzl.js",
	"./tzm": "./node_modules/moment/locale/tzm.js",
	"./tzm-latn": "./node_modules/moment/locale/tzm-latn.js",
	"./tzm-latn.js": "./node_modules/moment/locale/tzm-latn.js",
	"./tzm.js": "./node_modules/moment/locale/tzm.js",
	"./ug-cn": "./node_modules/moment/locale/ug-cn.js",
	"./ug-cn.js": "./node_modules/moment/locale/ug-cn.js",
	"./uk": "./node_modules/moment/locale/uk.js",
	"./uk.js": "./node_modules/moment/locale/uk.js",
	"./ur": "./node_modules/moment/locale/ur.js",
	"./ur.js": "./node_modules/moment/locale/ur.js",
	"./uz": "./node_modules/moment/locale/uz.js",
	"./uz-latn": "./node_modules/moment/locale/uz-latn.js",
	"./uz-latn.js": "./node_modules/moment/locale/uz-latn.js",
	"./uz.js": "./node_modules/moment/locale/uz.js",
	"./vi": "./node_modules/moment/locale/vi.js",
	"./vi.js": "./node_modules/moment/locale/vi.js",
	"./x-pseudo": "./node_modules/moment/locale/x-pseudo.js",
	"./x-pseudo.js": "./node_modules/moment/locale/x-pseudo.js",
	"./yo": "./node_modules/moment/locale/yo.js",
	"./yo.js": "./node_modules/moment/locale/yo.js",
	"./zh-cn": "./node_modules/moment/locale/zh-cn.js",
	"./zh-cn.js": "./node_modules/moment/locale/zh-cn.js",
	"./zh-hk": "./node_modules/moment/locale/zh-hk.js",
	"./zh-hk.js": "./node_modules/moment/locale/zh-hk.js",
	"./zh-tw": "./node_modules/moment/locale/zh-tw.js",
	"./zh-tw.js": "./node_modules/moment/locale/zh-tw.js"
};
function webpackContext(req) {
	return __webpack_require__(webpackContextResolve(req));
};
function webpackContextResolve(req) {
	var id = map[req];
	if(!(id + 1)) // check for number or string
		throw new Error("Cannot find module '" + req + "'.");
	return id;
};
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = "./node_modules/moment/locale recursive ^\\.\\/.*$";

/***/ }),

/***/ "./src/$$_lazy_route_resource lazy recursive":
/***/ (function(module, exports) {

function webpackEmptyAsyncContext(req) {
	// Here Promise.resolve().then() is used instead of new Promise() to prevent
	// uncatched exception popping up in devtools
	return Promise.resolve().then(function() {
		throw new Error("Cannot find module '" + req + "'.");
	});
}
webpackEmptyAsyncContext.keys = function() { return []; };
webpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;
module.exports = webpackEmptyAsyncContext;
webpackEmptyAsyncContext.id = "./src/$$_lazy_route_resource lazy recursive";

/***/ }),

/***/ "./src/app/admin/admin.component.css":
/***/ (function(module, exports) {

module.exports = ".container {\n  max-width: none;\n  width: 90%;\n}\n\ninput.search {\n  width: 250px;\n}\n"

/***/ }),

/***/ "./src/app/admin/admin.component.html":
/***/ (function(module, exports) {

module.exports = "<div class=\"container\">\n  <div *ngIf=\"admin\">\n    <input #search class=\"search p-1 my-3\" type=\"text\" placeholder=\"Strasse suchen...\" (keydown.enter)=\"onSearch(search.value)\">\n    <!--TODO: input action on keystroke-->\n    <button class=\"btn btn-outline-primary py-2 px-3 m-2\" *ngIf=\"filterActive\" (click)=\"onClearFilter()\">\n      <fa name=\"filter\" size=\"lg\"></fa>&nbsp;X\n    </button>\n    \n    <ng2-smart-table [settings]=\"settings\" [source]=\"source\" (editConfirm)=\"onClickEdit($event)\" (createConfirm)=\"onClickCreate($event)\"\n      (deleteConfirm)=\"onClickDelete($event)\">\n    </ng2-smart-table>\n    <div class=\"container h-100\" *ngIf=\"!data\">\n      <div class=\"row h-100 justify-content-center align-items-center\">\n        <fa class=\"alingn\" name=\"refresh\" size=\"4x\" animation=\"spin\"></fa>\n      </div>\n    </div>\n  </div>\n  <div class=\"card my-3\" *ngIf=\"!admin\">\n    <div class=\"m-2\">\n      <h1>Kein Zugriff</h1>\n      <p>Bitte Authorisieren Sie sich <b><a [routerLink]=\"['/login']\">hier</a></b> um Zugriff zu erhalten</p>\n    </div>\n  </div>\n</div>\n\n"

/***/ }),

/***/ "./src/app/admin/admin.component.ts":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__("./node_modules/@angular/core/esm5/core.js");
var radar_service_1 = __webpack_require__("./src/app/shared/radar.service.ts");
var ng2_smart_table_1 = __webpack_require__("./node_modules/ng2-smart-table/index.js");
var add_records_btn_component_1 = __webpack_require__("./src/app/admin/utility/add-records-btn.component.ts");
var select_coordinates_component_1 = __webpack_require__("./src/app/main/select-coordinates/select-coordinates.component.ts");
var datepicker_component_1 = __webpack_require__("./src/app/admin/utility/datepicker.component.ts");
var auth_service_1 = __webpack_require__("./src/app/shared/auth.service.ts");
// import * as moment from 'moment';
var $ = __webpack_require__("./node_modules/jquery/dist/jquery.js");
var AdminComponent = /** @class */ (function () {
    function AdminComponent(radarService, authService) {
        this.radarService = radarService;
        this.authService = authService;
        this.selectClick = new core_1.EventEmitter();
        this.filterActive = false;
        this.settings = {
            columns: {
                streetName: {
                    title: 'Strasse & Nr.',
                    filter: false,
                },
                // date: {
                //   title: 'Hinzugefügt am',
                //   filter: false,
                //   editable: false,
                //   addable: false,
                // type: 'html',
                // valuePrepareFunction: value => {
                //   return moment(value).format('L');
                // },
                // editor: {
                //   type: 'custom',
                //   component: DatepickerComponent,
                // },
                // },
                speedLimit: {
                    title: 'Limite (km/h)',
                    filter: false,
                },
                avgDir1: {
                    title: 'Ø (km/h) R1',
                    filter: false,
                    editable: false,
                    addable: false,
                },
                avgDir2: {
                    title: 'Ø (km/h) R2',
                    filter: false,
                    editable: false,
                    addable: false,
                },
                speedingQuoteDir1: {
                    title: 'Übertr.quote R1',
                    filter: false,
                    editable: false,
                    addable: false,
                    valuePrepareFunction: function (value) {
                        if (value) {
                            return (value * 100).toFixed(2) + '%';
                        }
                        return 0;
                    }
                },
                speedingQuoteDir2: {
                    title: 'Übertr.quote R2',
                    filter: false,
                    editable: false,
                    addable: false,
                    valuePrepareFunction: function (value) {
                        if (value) {
                            return (value * 100).toFixed(2) + '%';
                        }
                        return 0;
                    }
                },
                locationButton: {
                    title: 'Koordinaten',
                    filter: false,
                    type: 'custom',
                    addable: false,
                    editable: false,
                    renderComponent: select_coordinates_component_1.SelectCoordinatesComponent,
                    onComponentInitFunction: function (instance) {
                        instance.open.subscribe(function (row) {
                            // probably no action needed
                        });
                    }
                },
                recordsButton: {
                    title: 'Messungen',
                    filter: false,
                    type: 'custom',
                    editable: false,
                    addable: false,
                    renderComponent: add_records_btn_component_1.AddRecordsBtnComponent,
                    onComponentInitFunction: function (instance) { },
                },
                recordCount: {
                    title: '# Messungen',
                    filter: false,
                    editable: false,
                    addable: false,
                },
            },
            delete: {
                confirmDelete: true,
                deleteButtonContent: 'Löschen',
            },
            edit: {
                confirmSave: true,
                editButtonContent: 'Anpassen'
            },
            add: {
                confirmCreate: true,
                addButtonContent: 'Erstellen',
                createButtonContent: 'Erstellen',
                cancelButtonContent: 'Abbrechen',
            },
            cancel: {
                cancelButtonContent: 'Abbrechen',
            },
            create: {
                createButtonContent: 'Erstellen',
            },
            attr: {
                class: 'table'
            },
            actions: {
                add: true,
                edit: true,
                delete: true,
                columnTitle: 'Aktionen',
            },
        };
        // moment.locale('de-ch');
    }
    AdminComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.authService.currentAdminState.subscribe(function (admin) { return _this.admin = admin; });
        if (!this.data) {
            this.getData();
        }
        this.settings.columns.recordsButton.onComponentInitFunction = function (instance) {
            instance.open.subscribe(function (row) {
                // TODO: overwrite old entries in case of duplicates
            });
            instance.close.subscribe(function (row) {
                _this.getData();
            });
        };
    };
    /*
      TODO: Eventually add something like the function below if too many onUserRowSelects
      are to resource intensive
      */
    // onRefresh(selected, newValues) {
    //   if (selected && newValues) {
    //     this.source.update(selected, newValues);
    //   }
    // }
    /*onUserRowSelect(event): void {
      if (event.selected.length) {
        this.radarService.updateRecordCount(event.selected[0]).subscribe(
          res => console.log('Recordcount updated', res),
          err => console.error('Reocrdcount could not be updated', err)
        );
        this.radarService.getRadar(event.selected[0].id).subscribe(
          e => this.source.update(event.selected[0], e) // update(selected object, new values)
        );
      }
    }*/
    AdminComponent.prototype.onClickDelete = function (event) {
        if (confirm("\n    Wollen Sie den Eintrag und alle damit verbundenen\n    Messungen und Koordinaten wirklich l\u00F6schen?")) {
            if (event.data.hasOwnProperty('id')) {
                var radar = event.data;
                this.radarService.deleteRadar(radar)
                    .subscribe(function (res) {
                    event.confirm.resolve(event.source.data);
                }, function (err) {
                    if (err.error instanceof Error) {
                        console.log('Client-side error occured.');
                    }
                    else {
                        console.log('Server-side error occured.');
                        console.log(err);
                    }
                });
            }
        }
    };
    AdminComponent.prototype.onClickEdit = function (event) {
        event.newData.speedLimit = this.validateSpeed(event.newData.speedLimit);
        var radar = event.newData;
        this.radarService.updateRadar(radar)
            .subscribe(function (res) {
            event.confirm.resolve(event.newData);
        }, function (err) {
            if (err.error instanceof Error) {
                console.log('Client-side error occured.');
            }
            else {
                console.log('Server-side error occured.');
                console.log(err);
            }
        });
    };
    AdminComponent.prototype.onClickCreate = function (event) {
        var _this = this;
        event.newData.speedLimit = this.validateSpeed(event.newData.speedLimit);
        // event.newData.avgSpeed1 = Number(event.newData.avgSpeed1);
        // event.newData.speedingQuote1 = Number(event.newData.speedingQuote1);
        // console.log(this.data);
        this.radarService.addRadar(event.newData)
            .subscribe(function (res) {
            event.confirm.resolve(event.newData);
            // Necessary in case the radar gets deleted right after creation. No ID otherwise.
            _this.getData();
        }, function (err) {
            if (err.error instanceof Error) {
                console.log('Client-side error occured.');
            }
            else {
                console.log('Server-side error occured.');
                console.log(err);
            }
        });
    };
    AdminComponent.prototype.getData = function () {
        var _this = this;
        this.radarService.getRadarWithAvgSpeedAndSpeedingQuote()
            .subscribe(function (res) {
            _this.data = res;
            _this.source = new ng2_smart_table_1.LocalDataSource(_this.data);
        }, function (err) {
            _this.error = err;
            console.log(err);
        });
    };
    AdminComponent.prototype.validateSpeed = function (speed) {
        // cast string to number; NaN if cast is flawed
        if (!isNaN(Number(speed)) && speed > 0 && speed < 120) {
            return Number(speed);
        }
        return 1;
    };
    AdminComponent.prototype.onSearch = function (query) {
        if (query === void 0) { query = ''; }
        this.source.setFilter([
            // fields we want to include in the search
            {
                field: 'streetName',
                search: query
            },
        ], false);
        // second parameter specifying whether to perform 'AND' or 'OR' search
        // (meaning all columns should contain search query or at least one)
        // 'AND' by default, so changing to 'OR' by setting false here
        query.length ? this.filterActive = true : this.onClearFilter();
    };
    AdminComponent.prototype.onClearFilter = function () {
        this.source.reset();
        this.filterActive = false;
        $('#search').val('');
    };
    __decorate([
        core_1.Output(),
        __metadata("design:type", core_1.EventEmitter)
    ], AdminComponent.prototype, "selectClick", void 0);
    AdminComponent = __decorate([
        core_1.Component({
            selector: 'app-admin',
            template: __webpack_require__("./src/app/admin/admin.component.html"),
            styles: [__webpack_require__("./src/app/admin/admin.component.css")],
            entryComponents: [
                add_records_btn_component_1.AddRecordsBtnComponent,
                select_coordinates_component_1.SelectCoordinatesComponent,
                datepicker_component_1.DatepickerComponent
            ]
        }),
        __metadata("design:paramtypes", [radar_service_1.RadarService,
            auth_service_1.AuthService])
    ], AdminComponent);
    return AdminComponent;
}());
exports.AdminComponent = AdminComponent;


/***/ }),

/***/ "./src/app/admin/utility/add-records-btn.component.ts":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__("./node_modules/@angular/core/esm5/core.js");
var ng_bootstrap_1 = __webpack_require__("./node_modules/@ng-bootstrap/ng-bootstrap/index.js");
var radar_service_1 = __webpack_require__("./src/app/shared/radar.service.ts");
var $ = __webpack_require__("./node_modules/jquery/dist/jquery.js");
var sails_client_service_1 = __webpack_require__("./src/app/shared/sails-client.service.ts");
var environment_1 = __webpack_require__("./src/environments/environment.ts");
var AddRecordsBtnComponent = /** @class */ (function () {
    function AddRecordsBtnComponent(modalService, radarService, sailsClientService, ref) {
        this.modalService = modalService;
        this.radarService = radarService;
        this.sailsClientService = sailsClientService;
        this.ref = ref;
        this.open = new core_1.EventEmitter();
        this.close = new core_1.EventEmitter();
        this.validFiletype = false;
        this.loading = false;
        this.success = false;
        this.progress = 0;
        // recordsCreated = 0;
        this.foundMatches = 0;
        this.isClicked = false;
        this.counter = 0;
    }
    AddRecordsBtnComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.sub = this.sailsClientService.on('newRecords').subscribe(function (data) {
            _this.progress = Math.round(data.progress * 100);
            // OK if more than 98% done
            if (_this.progress >= 98 || _this.foundMatches < 50) {
                _this.loading = false;
                _this.success = true;
            }
            _this.counter++;
        });
        this.sailsClientService.on('recordsAggregated').subscribe(function (data) {
            setTimeout(function () {
                _this.aggregatedRecords = data.recordsCreated;
            }, 0);
        });
    };
    AddRecordsBtnComponent.prototype.ngOnDestroy = function () {
        this.sub.unsubscribe();
    };
    AddRecordsBtnComponent.prototype.onOpen = function (content) {
        var _this = this;
        this.success = false;
        this.loading = false;
        this.error = null;
        this.aggregatedRecords = null;
        this.modalReference = this.modalService.open(content, { windowClass: 'big-modal', backdrop: 'static', keyboard: false });
        this.modalReference.result.then(function (result) {
            _this.closeResult = "Closed with: " + result;
        }, function (reason) {
            _this.closeResult = "Dismissed " + _this.getDismissReason(reason);
        });
    };
    AddRecordsBtnComponent.prototype.getDismissReason = function (reason) {
        if (reason === ng_bootstrap_1.ModalDismissReasons.ESC) {
            return 'by pressing ESC';
        }
        else {
            return "with: " + reason;
        }
    };
    AddRecordsBtnComponent.prototype.fileChanged = function (e) {
        this.file = e.target.files[0];
        this.error = null;
        this.success = false;
        this.fileSize = this.file.size;
        if (this.file.type === 'text/plain') {
            this.validFiletype = true;
        }
        else {
            this.error = 'Kein zulässiger Dateitype ausgewählt. Bitte laden Sie eine .txt Datei hoch.';
        }
    };
    AddRecordsBtnComponent.prototype.uploadDocument = function (file) {
        var _this = this;
        var fileReader = new FileReader();
        fileReader.onload = function (e) {
            _this.loading = true;
            _this.creationCounter = 0;
            _this.error = null;
            _this.sailsClientService.post(environment_1.environment.api + 'record/batchCreate', {
                id: _this.rowData.id, text: fileReader.result.toString()
            })
                .subscribe(function (res) {
                _this.foundMatches = res.foundMatches;
                // console.log('Should be: ' + this.rowData.Recordcount);
            }, function (err) {
                _this.loading = false;
                if (err.data && err.data.error.indexOf('E_VALIDATION') > 0)
                    _this.error = 'Diese Daten wurden bereits hochgeladen';
                else {
                    _this.error = JSON.stringify(err);
                }
                console.log(err);
            });
        };
        fileReader.readAsText(this.file);
        this.file = null; // discard file after upload
    };
    AddRecordsBtnComponent.prototype.changePathValue = function (event) {
        var fileName = event.target.files[0].name;
        $('#uploadLabel').html(fileName);
    };
    AddRecordsBtnComponent.prototype.closeModal = function () {
        this.close.emit();
        this.modalReference.close();
    };
    __decorate([
        core_1.Input(),
        __metadata("design:type", Object)
    ], AddRecordsBtnComponent.prototype, "value", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", Object)
    ], AddRecordsBtnComponent.prototype, "rowData", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", core_1.EventEmitter)
    ], AddRecordsBtnComponent.prototype, "open", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", core_1.EventEmitter)
    ], AddRecordsBtnComponent.prototype, "close", void 0);
    AddRecordsBtnComponent = __decorate([
        core_1.Component({
            selector: 'app-add-records-btn',
            template: "\n    <ng-template #content let-c=\"close\" let-d=\"dismiss\">\n      <div class=\"modal-header\">\n        <h4 class=\"modal-title\">Messungen f\u00FCr {{rowData.streetName}} hochladen</h4>\n        <button type=\"button\" class=\"close\" aria-label=\"Close\" (click)=\"closeModal()\">\n          <span aria-hidden=\"true\">&times;</span>\n        </button>\n      </div>\n      <div class=\"modal-body\">\n        <div class=\"row\">\n          <div class=\"col-8\">\n            <div class=\"custom-file\">\n              <input type=\"file\"\n                     class=\"custom-file-input\"\n                     id=\"customFile\"\n                     (change)=\"fileChanged($event);changePathValue($event)\">\n              <label class=\"custom-file-label\"\n                     for=\"customFile\" id=\"uploadLabel\">\n                .txt-Datei w\u00E4hlen\n              </label>\n            </div>\n          </div>\n          <button type=\"button\"\n                  *ngIf=\"file && validFiletype\"\n                  class=\"btn btn-outline-primary\"\n                  [class.disabled]=\"isClicked\"\n                  (click)=\"uploadDocument();isClicked=true\">\n            Hochladen\n          </button>\n        </div>\n        <div *ngIf=\"(file && !validFiletype) || error\" class=\"alert alert-danger mt-2\" role=\"alert\">\n          Fehler: {{ error }}\n        </div>\n        <div class=\"container h-100 my-2\" *ngIf=\"!success && loading\">\n          <div class=\"row h-100 justify-content-center align-items-center\">\n            <fa class=\"alingn\" name=\"refresh\" size=\"4x\" animation=\"spin\"></fa>\n          </div>\n          <div class=\"row h-100 justify-content-center align-items-center\">\n            <p class=\"mt-3\">Anzahl Messungen: <strong>{{ foundMatches }}</strong> | Gespeichert: <strong>{{ progress }}\n              %</strong>\n            <p>\n          </div>\n        </div>\n        <div *ngIf=\"!success && fileSize > 300000\" class=\"alert alert-warning mt-2\" role=\"alert\">\n          <b>Warnung</b> Sie laden mehr als 300KB an Daten hoch. Das Parsen der Daten kann mehrere Minuten in Anspuch\n          nehmen.\n        </div>\n        <p *ngIf=\"aggregatedRecords\">\n          {{ aggregatedRecords }} Messungen aggregiert.\n        </p>\n        <div *ngIf=\"success\" class=\"alert alert-success mt-2\" role=\"alert\">\n          {{ foundMatches }} Messungen erfolgreich hochgeladen\n        </div>\n      </div>\n      <div class=\"modal-footer\">\n        <button type=\"button\" class=\"btn btn-outline-dark\" (click)=\"closeModal()\">Close</button>\n      </div>\n    </ng-template>\n    <button (click)=\"onOpen(content)\" class=\"btn btn-outline-primary py-0\">Hochladen</button>\n  ",
            styles: []
        }),
        __metadata("design:paramtypes", [ng_bootstrap_1.NgbModal,
            radar_service_1.RadarService,
            sails_client_service_1.SailsClientService,
            core_1.ElementRef])
    ], AddRecordsBtnComponent);
    return AddRecordsBtnComponent;
}());
exports.AddRecordsBtnComponent = AddRecordsBtnComponent;


/***/ }),

/***/ "./src/app/admin/utility/datepicker.component.ts":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__("./node_modules/@angular/core/esm5/core.js");
var ng2_smart_table_1 = __webpack_require__("./node_modules/ng2-smart-table/index.js");
var moment = __webpack_require__("./node_modules/moment/moment.js");
var DatepickerComponent = /** @class */ (function (_super) {
    __extends(DatepickerComponent, _super);
    function DatepickerComponent() {
        var _this = _super.call(this) || this;
        _this.open = new core_1.EventEmitter();
        moment.locale('de-ch');
        return _this;
    }
    DatepickerComponent.prototype.ngOnInit = function () {
        this.setDate = this.cell.getValue();
        // If no date is entered
        if (this.cell.getValue().length) {
            this.cell.newValue = moment().toDate();
        }
    };
    DatepickerComponent.prototype.onChange = function (event) {
        this.cell.newValue = event.target.value;
    };
    __decorate([
        core_1.Output(),
        __metadata("design:type", core_1.EventEmitter)
    ], DatepickerComponent.prototype, "open", void 0);
    DatepickerComponent = __decorate([
        core_1.Component({
            selector: 'app-datepicker',
            template: "\n    <input type=\"date\" [ngModel]=\"setDate\" (change)=\"onChange($event)\">\n    <!--<input type=\"date\" (ngModelChange)=\"dt = $event\" (change)=\"onChange($event)\">-->\n  ",
            styles: []
        }),
        __metadata("design:paramtypes", [])
    ], DatepickerComponent);
    return DatepickerComponent;
}(ng2_smart_table_1.DefaultEditor));
exports.DatepickerComponent = DatepickerComponent;


/***/ }),

/***/ "./src/app/app-routing.module.ts":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__("./node_modules/@angular/core/esm5/core.js");
var router_1 = __webpack_require__("./node_modules/@angular/router/esm5/router.js");
var map_view_component_1 = __webpack_require__("./src/app/main/map-view/map-view.component.ts");
var admin_component_1 = __webpack_require__("./src/app/admin/admin.component.ts");
var routes = [
    { path: '', redirectTo: 'karte', pathMatch: 'full' },
    { path: 'karte', component: map_view_component_1.MapViewComponent },
    { path: 'admin', component: admin_component_1.AdminComponent },
    { path: 'login', component: map_view_component_1.MapViewComponent },
];
var AppRoutingModule = /** @class */ (function () {
    function AppRoutingModule() {
    }
    AppRoutingModule = __decorate([
        core_1.NgModule({
            imports: [router_1.RouterModule.forRoot(routes)],
            exports: [router_1.RouterModule]
        })
    ], AppRoutingModule);
    return AppRoutingModule;
}());
exports.AppRoutingModule = AppRoutingModule;


/***/ }),

/***/ "./src/app/app.component.css":
/***/ (function(module, exports) {

module.exports = ".infoBtn {\n  position: fixed;\n  bottom: 0;\n  right: 0;\n  border-radius: 50%;\n  font-family: Georgia;\n  z-index: 10000;\n}\n.dark-modal .modal-content {\n  background-color: #292b2c;\n  color: white;\n}\n.dark-modal .close {\n  color: white;\n}\n.light-blue-backdrop {\n  background-color: #5cb3fd;\n}\nul li {\n  padding-bottom: 10px;\n}\n"

/***/ }),

/***/ "./src/app/app.component.html":
/***/ (function(module, exports) {

module.exports = "<app-navbar [admin]=\"admin\"></app-navbar>\n<router-outlet></router-outlet>\n<ng-template #content let-c=\"close\" let-d=\"dismiss\">\n  <div class=\"modal-header\">\n    <h4 class=\"modal-title\">\n      Informationen zu statistischen Geschwindigkeitserhebungen des Kantons Basel-Stadt\n    </h4>\n    <button type=\"button\" class=\"close\" aria-label=\"Close\" (click)=\"d('Cross click')\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body\">\n    <p>Die Visualisierung der Geschwindigkeitserhebungen basiert auf Messdaten der <a href=\"http://www.polizei.bs.ch/\" target=\"_blank\">Kantonspolizei Basel-Stadt</a>, welche zu statistischen Zwecken erhoben wurden. Die Daten wurden im Rahmen eines Open Government Data Pilotprojektes von der <a target=\"_blank\" href=\"http://www.digitale-nachhaltigkeit.unibe.ch/\">Forschungsstelle Digitale Nachhaltigkeit</a> der Universität Bern visualisiert.</p>\n\n    <ul>\n      <li>\n        Die Punkte auf der Karte bilden die Übertretungsquote in der jeweiligen Strasse ab.\n        Die Farben repräsentieren die folgenden Kategorien:\n        <br>\n        <svg width=\"15\" height=\"15\">\n          <rect x=\"0\" y=\"0\" width=\"15\" height=\"15\" style=\"fill:#ffff00;stroke:black;stroke-width:2;stroke-opacity:0.9\" />\n        </svg> Übertretungsquote zwischen 0 und 10%\n        <br>\n        <svg width=\"15\" height=\"15\">\n          <rect x=\"0\" y=\"0\" width=\"15\" height=\"15\" style=\"fill:#ffa500;stroke:black;stroke-width:2;stroke-opacity:0.9\" />\n        </svg> Übertretungsquote zwischen 11% und 25%\n        <br>\n        <svg width=\"15\" height=\"15\">\n          <rect x=\"0\" y=\"0\" width=\"15\" height=\"15\" style=\"fill:#d73027;stroke:black;stroke-width:2;stroke-opacity:0.9\" />\n        </svg> Übertretungsquote höher als 25%\n      </li>\n      <li>\n        Durch näheres Heranzoomen erscheinen in der Karte statt der Punkte Pfeile für die einzelnen Richtungen.\n      </li>\n      <li>\n        Für jeden Punkt bzw. Pfeil sind in einem Anzeigefeld weitere Informationen (wie die Anzahl gemessener Fahrzeuge und die Durchschnittsgeschwindigkeit) einsehbar.\n      </li>\n      <li>\n        Durch Klicken auf einen Punkt bzw. Pfeil erscheint ein Säulendiagramm, welches die Messungen für einzelne Wochentage zeigt. Wird auf die Säule für einen Wochentag geklickt, erscheint ein weiteres Diagramm, in dem die Messungen pro Stunde an einem Tag angegeben werden. Die Farbe der Säulen bildet die Anzahl gemessener Fahrzeuge ab.\n      </li>\n    </ul>\n\n  </div>\n  <div class=\"modal-footer\">\n    <button type=\"button\" class=\"btn btn-light\" (click)=\"c('Close click')\">Schliessen</button>\n  </div>\n</ng-template>\n<button class=\"btn btn-primary m-2 p-2 px-3 infoBtn\" id=\"openModal\" (click)=\"openLg(content)\">i</button>\n\n"

/***/ }),

/***/ "./src/app/app.component.ts":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__("./node_modules/@angular/core/esm5/core.js");
var ng_bootstrap_1 = __webpack_require__("./node_modules/@ng-bootstrap/ng-bootstrap/index.js");
var angular2_sails_1 = __webpack_require__("./node_modules/angular2-sails/index.js");
var environment_1 = __webpack_require__("./src/environments/environment.ts");
var auth_service_1 = __webpack_require__("./src/app/shared/auth.service.ts");
var router_1 = __webpack_require__("./node_modules/@angular/router/esm5/router.js");
var AppComponent = /** @class */ (function () {
    function AppComponent(router, authService, _sailsService, modalService) {
        var _this = this;
        this.router = router;
        this.authService = authService;
        this._sailsService = _sailsService;
        this.modalService = modalService;
        this.title = 'Geschwindigkeitserhebungen des Kantons Basel-Stadt';
        this.firstDisplay = true; // Should be "true" in production
        router.events.subscribe(function () {
            if (_this.router.url.indexOf('login') > -1) {
                _this.authService.requestLogin().subscribe(function (event) {
                    if (event) {
                        _this.admin = event;
                        _this.authService.changeAdminState(_this.admin);
                    }
                }, function (error) { return console.log(error); });
            }
            if (_this.router.url.indexOf('admin') > -1) {
                _this.firstDisplay = false;
            }
        });
    }
    AppComponent.prototype.ngOnInit = function () {
        // Init Sails service and request CSRF Token and check login
        var opts = {
            url: environment_1.environment.api,
            transports: ['websocket'],
            reconnection: true
        };
        this._sailsService.connect(opts);
    };
    AppComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        if (this.firstDisplay) {
            // setTimeout necessary to avoid ExpressionChangedAfterItHasBeenCheckedError
            setTimeout(function () {
                _this.modalService.open(_this.content, { size: 'lg' });
                _this.firstDisplay = false;
            });
        }
    };
    AppComponent.prototype.openLg = function (content) {
        this.modalService.open(content, { size: 'lg', windowClass: 'animated slideInUp' });
    };
    __decorate([
        core_1.ViewChild('content'),
        __metadata("design:type", core_1.ElementRef)
    ], AppComponent.prototype, "content", void 0);
    AppComponent = __decorate([
        core_1.Component({
            selector: 'app-root',
            template: __webpack_require__("./src/app/app.component.html"),
            styles: [__webpack_require__("./src/app/app.component.css")]
        }),
        __metadata("design:paramtypes", [router_1.Router,
            auth_service_1.AuthService,
            angular2_sails_1.SailsService,
            ng_bootstrap_1.NgbModal])
    ], AppComponent);
    return AppComponent;
}());
exports.AppComponent = AppComponent;


/***/ }),

/***/ "./src/app/app.module.ts":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
var platform_browser_1 = __webpack_require__("./node_modules/@angular/platform-browser/esm5/platform-browser.js");
var core_1 = __webpack_require__("./node_modules/@angular/core/esm5/core.js");
var app_routing_module_1 = __webpack_require__("./src/app/app-routing.module.ts");
var app_component_1 = __webpack_require__("./src/app/app.component.ts");
var navbar_component_1 = __webpack_require__("./src/app/navbar/navbar.component.ts");
var ng_bootstrap_1 = __webpack_require__("./node_modules/@ng-bootstrap/ng-bootstrap/index.js");
var map_component_1 = __webpack_require__("./src/app/main/map/map.component.ts");
var map_view_component_1 = __webpack_require__("./src/app/main/map-view/map-view.component.ts");
var ngx_leaflet_1 = __webpack_require__("./node_modules/@asymmetrik/ngx-leaflet/dist/index.js");
var map_tooltip_component_1 = __webpack_require__("./src/app/main/map-tooltip/map-tooltip.component.ts");
var data_service_service_1 = __webpack_require__("./src/app/shared/data-service.service.ts");
var http_1 = __webpack_require__("./node_modules/@angular/common/esm5/http.js");
var color_service_1 = __webpack_require__("./src/app/shared/color.service.ts");
var map_detail_component_1 = __webpack_require__("./src/app/main/map-detail/map-detail.component.ts");
var d3graph_component_1 = __webpack_require__("./src/app/main/d3graph/d3graph-component.ts");
var d3_ng2_service_1 = __webpack_require__("./node_modules/d3-ng2-service/index.js");
var admin_component_1 = __webpack_require__("./src/app/admin/admin.component.ts");
var radar_service_1 = __webpack_require__("./src/app/shared/radar.service.ts");
var record_service_1 = __webpack_require__("./src/app/shared/record.service.ts");
var ng2_smart_table_1 = __webpack_require__("./node_modules/ng2-smart-table/index.js");
var select_coordinates_component_1 = __webpack_require__("./src/app/main/select-coordinates/select-coordinates.component.ts");
var forms_1 = __webpack_require__("./node_modules/@angular/forms/esm5/forms.js");
var add_records_btn_component_1 = __webpack_require__("./src/app/admin/utility/add-records-btn.component.ts");
var calculator_service_1 = __webpack_require__("./src/app/shared/calculator.service.ts");
var datepicker_component_1 = __webpack_require__("./src/app/admin/utility/datepicker.component.ts");
var angular_font_awesome_1 = __webpack_require__("./node_modules/angular-font-awesome/dist/angular-font-awesome.es5.js");
var sails_client_service_1 = __webpack_require__("./src/app/shared/sails-client.service.ts");
var angular2_sails_1 = __webpack_require__("./node_modules/angular2-sails/index.js");
var auth_service_1 = __webpack_require__("./src/app/shared/auth.service.ts");
var AppModule = /** @class */ (function () {
    function AppModule() {
    }
    AppModule = __decorate([
        core_1.NgModule({
            declarations: [
                app_component_1.AppComponent,
                navbar_component_1.NavbarComponent,
                map_component_1.MapComponent,
                map_view_component_1.MapViewComponent,
                map_tooltip_component_1.MapTooltipComponent,
                map_detail_component_1.MapDetailComponent,
                d3graph_component_1.D3graphComponent,
                admin_component_1.AdminComponent,
                select_coordinates_component_1.SelectCoordinatesComponent,
                add_records_btn_component_1.AddRecordsBtnComponent,
                datepicker_component_1.DatepickerComponent
            ],
            imports: [
                platform_browser_1.BrowserModule,
                app_routing_module_1.AppRoutingModule,
                ng_bootstrap_1.NgbModule.forRoot(),
                ngx_leaflet_1.LeafletModule.forRoot(),
                http_1.HttpClientModule,
                ng2_smart_table_1.Ng2SmartTableModule,
                forms_1.FormsModule,
                angular_font_awesome_1.AngularFontAwesomeModule,
                angular2_sails_1.SailsModule.forRoot()
            ],
            providers: [
                data_service_service_1.DataService,
                http_1.HttpClientModule,
                color_service_1.ColorService,
                d3_ng2_service_1.D3Service,
                radar_service_1.RadarService,
                record_service_1.RecordService,
                calculator_service_1.CalculatorService,
                sails_client_service_1.SailsClientService,
                auth_service_1.AuthService,
            ],
            bootstrap: [app_component_1.AppComponent]
        })
    ], AppModule);
    return AppModule;
}());
exports.AppModule = AppModule;


/***/ }),

/***/ "./src/app/main/d3graph/d3graph-component.css":
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./src/app/main/d3graph/d3graph-component.html":
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./src/app/main/d3graph/d3graph-component.ts":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__("./node_modules/@angular/core/esm5/core.js");
var d3_ng2_service_1 = __webpack_require__("./node_modules/d3-ng2-service/index.js");
var moment = __webpack_require__("./node_modules/moment/moment.js");
var color_service_1 = __webpack_require__("./src/app/shared/color.service.ts");
var D3graphComponent = /** @class */ (function () {
    function D3graphComponent(element, d3Service, colorService) {
        this.colorService = colorService;
        this.clickEvent = new core_1.EventEmitter();
        this.colors = [];
        this.padding = 50;
        this.height = 300;
        this.d3 = d3Service.getD3();
        this.parentNativeElement = element.nativeElement;
        moment.locale('de-ch');
    }
    D3graphComponent.prototype.ngOnInit = function () { };
    D3graphComponent.prototype.ngOnChanges = function (changes) {
        if (changes.data && changes.data.currentValue && !changes.data.previousValue) {
            this.initChart();
            this.updateChart();
        }
        else if (changes.data && changes.data.currentValue) {
            this.updateChart();
        }
        else if (this.data && changes.measure && changes.measure.currentValue) {
            this.initChart();
            this.updateChart();
        }
    };
    D3graphComponent.prototype.initChart = function () {
        var self = this;
        var d3 = this.d3;
        this.width = $('#map').width();
        $(this.parentNativeElement).find('svg').remove();
        if (this.parentNativeElement !== null) {
            self.svg = d3.select(this.parentNativeElement)
                .append('svg') // create an <svg> element
                .attr('width', self.width) // set its dimensions
                .attr('height', self.height);
            self.data = this.data;
            var weekDomain = ['Montag', 'Dienstag', 'Mittwoch', 'Donnerstag', 'Freitag', 'Samstag', 'Sonntag'];
            var hoursDomain = ['00:00', '01:00', '02:00', '03:00', '04:00', '05:00', '06:00', '07:00', '08:00',
                '09:00', '10:00', '11:00', '12:00', '13:00', '14:00', '15:00', '16:00', '17:00', '18:00', '19:00',
                '20:00', '21:00', '22:00', '23:00'];
            var domain = void 0;
            (self.groupBy === 'days') ? domain = weekDomain : domain = hoursDomain;
            self.xScale = d3.scaleBand()
                .domain(domain)
                .range([0, (self.width - (2 * self.padding))])
                .padding(.1);
            var avgDomain = [self.speedLimit + 15, 0];
            var speedingQuoteDomain = [.7, 0];
            (self.measure === 'average') ? domain = avgDomain : domain = speedingQuoteDomain;
            self.yScale = d3.scaleLinear()
                .domain(domain)
                .range([0, (self.height - (2 * self.padding))]);
            self.xAxis = d3.axisBottom(self.xScale) // d3.js v.4
                .scale(self.xScale)
                .ticks(7);
            var avgAxis = d3.axisLeft(self.yScale) // d3.js v.4
                .scale(self.yScale)
                .ticks(7)
                .tickFormat(function (d) { return d + ' km/h'; });
            var speedingQuoteAxis = d3.axisLeft(self.yScale) // d3.js v.4
                .scale(self.yScale)
                .ticks(7)
                .tickFormat(self.d3.format('.0%'));
            (self.measure === 'average') ? self.yAxis = avgAxis : self.yAxis = speedingQuoteAxis;
            self.svg.append('g')
                .attr('class', 'axis')
                .attr('transform', 'translate(' + (self.padding) + ',' + self.padding + ')')
                .call(self.yAxis);
            self.svg.append('g') // create a <g> element
                .attr('class', 'axis') // specify classes
                .attr('transform', 'translate(' + self.padding + ',' + (self.height - self.padding) + ')')
                .call(self.xAxis); // let the axis do its thing
        }
    };
    D3graphComponent.prototype.updateChart = function () {
        var self = this;
        var countMax = self.d3.max(self.data.map(function (d) { return d.count; }));
        var div = this.d3.select('body').append('div')
            .attr('class', 'tooltip')
            .style('opacity', 0);
        self.rects = self.svg.selectAll('rect')
            .data(self.data);
        self.rects
            .enter()
            .append('rect')
            .attr('x', function (d, i) {
            if (self.groupBy === 'days') {
                return self.xScale(moment(d.date).format('dddd')) + self.padding;
            }
            else {
                return self.xScale(d.hour) + self.padding;
            }
        })
            .attr('y', function (d) {
            if (self.measure === 'average') {
                return self.yScale(d.avgSpeed) + self.padding;
            }
            else {
                return self.yScale(d.speedingQuote) + self.padding;
            }
        })
            .attr('height', function (d) {
            if (self.measure === 'average') {
                return self.height - self.yScale(d.avgSpeed) - (2 * self.padding);
            }
            else {
                return self.height - self.yScale(d.speedingQuote) - (2 * self.padding);
            }
        })
            .attr('width', self.xScale.bandwidth())
            .attr('fill', function (d, i) {
            return self.colorService.numberToColor(d.count, countMax);
        })
            .attr('opacity', function (d, i) {
            return self.colorService.numberToOpacity(d.count, countMax);
        })
            .attr('stroke', 'black')
            .classed('clickable', this.clickable)
            .on('mouseover', function (d) {
            div.transition()
                .duration(200)
                .style('opacity', .9);
            div.html("Geschwindigkeitslimite:\n<span class='kmh-limit mb-2 ml-2'>" + self.speedLimit + "</span><br>\n\u00DCbertretungsquote: " + Math.round(d.speedingQuote * 100) + "%<br>\nDurchschnittsgeschwindigkeit: " + Math.round(d.avgSpeed * 100) / 100 + "<br>\nAnzahl Fahrzeuge: " + d.count + "<br/>\n<br/>")
                .style('left', (self.d3.event.pageX + 20) + 'px')
                .style('top', (self.d3.event.pageY - 28) + 'px');
        })
            .on('mousemove', function (d) {
            div.style('left', (self.d3.event.pageX + 20) + 'px')
                .style('top', (self.d3.event.pageY - 28) + 'px');
        })
            .on('mouseout', function (d) {
            div.transition()
                .duration(500)
                .style('opacity', 0);
        })
            .on('click', function (d) {
            if (self.clickable) {
                self.clickEvent.emit(d);
            }
        });
        self.rects
            .transition()
            .attr('x', function (d, i) {
            if (self.groupBy === 'days') {
                return self.xScale(moment(d.date).format('dddd')) + self.padding;
            }
            else {
                return self.xScale(d.hour) + self.padding;
            }
        })
            .attr('y', function (d) {
            if (self.measure === 'average') {
                return self.yScale(d.avgSpeed) + self.padding;
            }
            else {
                return self.yScale(d.speedingQuote) + self.padding;
            }
        })
            .attr('height', function (d) {
            if (self.measure === 'average') {
                return self.height - self.yScale(d.avgSpeed) - (2 * self.padding);
            }
            else {
                return self.height - self.yScale(d.speedingQuote) - (2 * self.padding);
            }
        })
            .attr('width', self.xScale.bandwidth())
            .attr('fill', function (d, i) {
            return self.colorService.numberToColor(d.count, countMax);
        })
            .attr('opacity', function (d, i) {
            return self.colorService.numberToOpacity(d.count, countMax);
        })
            .attr('stroke', 'black');
        self.rects.exit().remove();
        self.svg.selectAll('.line').remove();
        if (self.measure === 'average') {
            self.svg
                .append('line')
                .attr('y1', self.yScale(self.speedLimit) + self.padding)
                .attr('y2', self.yScale(self.speedLimit) + self.padding)
                .attr('x1', self.padding)
                .attr('x2', self.width + self.padding)
                .style('stroke', 'rgb(255,0,0)')
                .style('stroke-width', '2');
        }
    };
    __decorate([
        core_1.Input(),
        __metadata("design:type", Array)
    ], D3graphComponent.prototype, "data", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", Object)
    ], D3graphComponent.prototype, "radar", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", Number)
    ], D3graphComponent.prototype, "speedLimit", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", String)
    ], D3graphComponent.prototype, "groupBy", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", Boolean)
    ], D3graphComponent.prototype, "clickable", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", String)
    ], D3graphComponent.prototype, "measure", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", core_1.EventEmitter)
    ], D3graphComponent.prototype, "clickEvent", void 0);
    D3graphComponent = __decorate([
        core_1.Component({
            selector: 'app-d3graph',
            template: __webpack_require__("./src/app/main/d3graph/d3graph-component.html"),
            styles: [__webpack_require__("./src/app/main/d3graph/d3graph-component.css")]
        }),
        __metadata("design:paramtypes", [core_1.ElementRef,
            d3_ng2_service_1.D3Service,
            color_service_1.ColorService])
    ], D3graphComponent);
    return D3graphComponent;
}());
exports.D3graphComponent = D3graphComponent;


/***/ }),

/***/ "./src/app/main/map-detail/map-detail.component.css":
/***/ (function(module, exports) {

module.exports = "#map-detail {\n  min-height: 500px;\n}\n\n.dropdown-item {\n  cursor: pointer;\n}\n\n.header span.kmh-limit {\n  margin-bottom: 10px;\n}\n\n.colorSvg {\n  width: 10px;\n  height: 10px;\n  overflow: visible;\n  margin-left: 5px;\n}\n\n.table-fixed-width td:nth-child(2n + 1) {\n  width: 300px;\n}\n"

/***/ }),

/***/ "./src/app/main/map-detail/map-detail.component.html":
/***/ (function(module, exports) {

module.exports = "<div class=\"card mt-2\" id=\"map-detail\" *ngIf=\"visible\">\n  <div class=\"card-body\">\n    <div class=\"mb-3 header\">\n      <h2 class=\"mb-3 d-inline pb-1\">{{header}}</h2>\n      <p class=\"d-inline pb-1 ml-2\"><span class=\"kmh-limit\">{{radar.speedLimit}}</span></p>\n    </div>\n    <div *ngIf=\"loading\">\n      <i class=\"fa fa-refresh fa-spin fa-3x fa-fw\"></i>\n      <span class=\"sr-only\">Laden...</span>\n    </div>\n    <div *ngIf=\"!loading\">\n      <div class=\"row\">\n        <div class=\"col-12\">\n          <div ngbDropdown class=\"d-inline-block\">\n            <button class=\"btn btn-outline-primary\" id=\"dropdownBasic1\" ngbDropdownToggle>\n              {{selectedMeasurement.startDay | date:'dd.MM.yyyy'}} (Woche {{selectedMeasurement.week}})\n            </button>\n            <div ngbDropdownMenu aria-labelledby=\"dropdownBasic1\">\n              <button class=\"dropdown-item\" *ngFor=\"let measurement of measurements\"\n                      (click)=\"selectMesaurement(measurement)\">\n                {{measurement.startDay | date:'dd.MM.yyyy'}} (Woche {{measurement.week}})\n              </button>\n            </div>\n          </div>\n          <div class=\"btn-group btn-group-toggle\" (change)=\"changeDirection()\" ngbRadioGroup name=\"direction\"\n               [(ngModel)]=\"directionOne\">\n            <label ngbButtonLabel class=\"btn-primary\">\n              <input ngbButton type=\"radio\" [value]=\"true\"> Richtung 1\n            </label>\n            <label ngbButtonLabel class=\"btn-primary\">\n              <input ngbButton type=\"radio\" [value]=\"false\"> Richtung 2\n            </label>\n          </div>\n          <div class=\"btn-group btn-group-toggle\" ngbRadioGroup name=\"groupBy\" [(ngModel)]=\"measure\">\n            <label ngbButtonLabel class=\"btn-primary\">\n              <input ngbButton type=\"radio\" [value]=\"'average'\"> Durchschnitt\n            </label>\n            <label ngbButtonLabel class=\"btn-primary\">\n              <input ngbButton type=\"radio\" [value]=\"'speedingQuote'\"> Übertretungsquote\n            </label>\n          </div>\n        </div>\n      </div>\n      <div class=\"row\">\n        <app-d3graph *ngIf=\"radar\" [data]=\"currentWeek\" [radar]=\"radar\" [speedLimit]=\"radar?.speedLimit\"\n                     [groupBy]=\"'days'\" [measure]=\"measure\" [clickable]=\"true\"\n                     (clickEvent)=\"openDailyView($event)\"></app-d3graph>\n      </div>\n      <div class=\"row\">\n        <div class=\"col s12\">\n          <h3 *ngIf=\"currentDay\">{{dailyHeader}}</h3>\n          <app-d3graph *ngIf=\"currentDay\" [measure]=\"measure\" [data]=\"currentDay\" [radar]=\"radar\"\n                       [speedLimit]=\"radar?.speedLimit\"\n                       [groupBy]=\"'hours'\" [clickable]=\"false\"></app-d3graph>\n        </div>\n      </div>\n      <div class=\"row mt-5\" *ngIf=\"radar\">\n        <div class=\"col-12\">\n          <h3>Details:</h3>\n          <div class=\"pt-2\">\n            <div class=\"row\">\n              <div class=\"col-12 col-lg-6\">\n                <table class=\"table-fixed-width\">\n                  <tr>\n                    <td><strong>Strassenname:</strong></td>\n                    <td>{{radar.streetName}}</td>\n                  </tr>\n                  <tr>\n                    <td><strong>Geschwindigkeitslimite:</strong></td>\n                    <td><span class=\"kmh-limit\">{{radar.speedLimit}}</span></td>\n                  </tr>\n                </table>\n              </div>\n            </div>\n            <div class=\"row\">\n              <div class=\"col-12 col-lg-6 mt-2\">\n                <p class=\"mt-2 mb-0\"><strong>Fahrtrichtung 1</strong></p>\n                <table class=\"table-fixed-width\">\n                  <tr>\n                    <td>Anzahl gemessener Fahrzeuge:</td>\n                    <td>\n                      {{radar.count1}}\n                    </td>\n                  </tr>\n                  <tr>\n                    <td>Übertretungsquote:</td>\n                    <td>\n                      {{radar.speedingQuoteDir1 * 100 | number:\"1.2-2\"}}%\n                      <svg class=\"colorSvg\">\n                        <rect height=\"10\" width=\"10\" [attr.fill]=\"perc2Color(radar.speedingQuoteDir1 * 100)\"></rect>\n                      </svg>\n                    </td>\n                  </tr>\n                  <tr>\n                    <td>Durchschnittsgeschwindigkeit:</td>\n                    <td>{{radar.avgDir1}}&nbsp;km/h</td>\n                  </tr>\n                </table>\n              </div>\n            </div>\n            <div class=\"row\">\n              <div class=\"col-12 col-lg-6 mt-2\">\n                <p class=\"mt-2 mb-0\"><strong>Fahrtrichtung 2</strong></p>\n                <table class=\"table-fixed-width\">\n                  <tr>\n                    <td>Anzahl gemessener Fahrzeuge:</td>\n                    <td>\n                      {{radar.count2}}\n                    </td>\n                  </tr>\n                  <tr>\n                    <td>Übertretungsquote:</td>\n                    <td>\n                      {{radar.speedingQuoteDir2 * 100 | number:\"1.2-2\"}}%\n                      <svg class=\"colorSvg\">\n                        <rect height=\"10\" width=\"10\" [attr.fill]=\"perc2Color(radar.speedingQuoteDir2 * 100)\"></rect>\n                      </svg>\n                    </td>\n                  </tr>\n                  <tr>\n                    <td>Durchschnittsgeschwindigkeit:</td>\n                    <td>{{radar.avgDir2}}&nbsp;km/h</td>\n                  </tr>\n                </table>\n              </div>\n            </div>\n            <div class=\"row mb-5 mt-3\">\n              <div class=\"col-12\">\n                <table class=\"table-fixed-width\">\n                  <tr>\n                    <td><strong>Letzte Messung:</strong></td>\n                    <td>{{radar.maxDate | date:'dd.MM.yyyy'}}</td>\n                  </tr>\n                </table>\n              </div>\n            </div>\n            <i>Information: Diese Daten, sowie die Daten in den Tooltips beziehen sich auf alle Messungen die für die\n              entsprechende Strasse gemacht wurden.<br>\n              Zum Beispiel ist der Durchschnitt (Richtung 1) aus allen Messungen für diese Strasse\n              ({{radar.streetName}}, Richtung 1) berechnet. </i>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n"

/***/ }),

/***/ "./src/app/main/map-detail/map-detail.component.ts":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__("./node_modules/@angular/core/esm5/core.js");
var record_service_1 = __webpack_require__("./src/app/shared/record.service.ts");
var color_service_1 = __webpack_require__("./src/app/shared/color.service.ts");
var moment = __webpack_require__("./node_modules/moment/moment.js");
var MapDetailComponent = /** @class */ (function () {
    function MapDetailComponent(recordService, ref, colorService) {
        this.recordService = recordService;
        this.ref = ref;
        this.colorService = colorService;
        this.visible = false;
        this.loading = false;
        this.header = '';
        this.directionOne = true;
        this.measure = 'speedingQuote';
    }
    MapDetailComponent.prototype.ngOnInit = function () {
    };
    MapDetailComponent.prototype.open = function (radar) {
        this.directionOne = radar.count1 > 0;
        this.visible = true;
        this.header = radar.streetName;
        this.radar = radar;
        // document.getElementById('map-detail').scrollIntoView();
        // we need this because the action is called from leaflet.
        // and leaflet has a bug that it'doesn't trigger update circle after changes
        this.getMeasurementWeeks();
    };
    MapDetailComponent.prototype.getMeasurementWeeks = function () {
        var _this = this;
        this.loading = true;
        var direction;
        (this.directionOne) ? direction = 1 : direction = 2;
        this.recordService.getMeasurementWeeks(this.radar.id, direction).subscribe(function (data) {
            _this.measurements = data;
            _this.selectMesaurement(_this.measurements[0]);
            _this.loading = false;
        });
    };
    MapDetailComponent.prototype.selectMesaurement = function (measurement) {
        this.currentDay = null;
        this.selectedMeasurement = measurement;
        this.getMeasurementsForWeek();
    };
    MapDetailComponent.prototype.changeDirection = function () {
        this.currentDay = null;
        this.getMeasurementsForWeek();
    };
    MapDetailComponent.prototype.getMeasurementsForWeek = function () {
        var _this = this;
        var direction;
        (this.directionOne) ? direction = 1 : direction = 2;
        this.recordService.getRecordsForWeeklyView(this.radar.id, direction, moment(this.selectedMeasurement.startDay).format('YYYY-MM-DD'), moment(this.selectedMeasurement.startDay).add(7, 'day').format('YYYY-MM-DD')).subscribe(function (data) {
            _this.currentWeek = data;
            _this.ref.tick();
        });
    };
    MapDetailComponent.prototype.openDailyView = function (weeklyRecord) {
        var _this = this;
        this.dailyHeader = moment(weeklyRecord.date).format('dddd');
        this.dailyHeader += ' (' + moment(weeklyRecord.date).format('DD.MM.YYYY') + ')';
        var direction;
        (this.directionOne) ? direction = 1 : direction = 2;
        this.recordService.getRecordsForDailyView(this.radar.id, direction, moment(weeklyRecord.date).format('YYYY-MM-DD'), moment(weeklyRecord.date).add(1, 'day').format('YYYY-MM-DD')).subscribe(function (data) {
            _this.currentDay = data;
        });
    };
    MapDetailComponent.prototype.perc2Color = function (perc) {
        return this.colorService.perc2color(perc);
    };
    MapDetailComponent = __decorate([
        core_1.Component({
            selector: 'app-map-detail',
            template: __webpack_require__("./src/app/main/map-detail/map-detail.component.html"),
            styles: [__webpack_require__("./src/app/main/map-detail/map-detail.component.css")]
        }),
        __metadata("design:paramtypes", [record_service_1.RecordService,
            core_1.ApplicationRef,
            color_service_1.ColorService])
    ], MapDetailComponent);
    return MapDetailComponent;
}());
exports.MapDetailComponent = MapDetailComponent;


/***/ }),

/***/ "./src/app/main/map-tooltip/map-tooltip.component.css":
/***/ (function(module, exports) {

module.exports = "app-map-tooltip {\n  position: absolute;\n}\n\n.map-tooltip {\n  position: absolute;\n  z-index: 450;\n  background-color: white;\n  opacity: .9;\n  padding: 5px;\n  margin-top: -100px;\n  margin-left: 20px;\n  border-radius: 5px;\n  border: 1px solid black;\n  color: black;\n  pointer-events: none;\n}\n\n.map-tooltip table td {\n  white-space: nowrap;\n  font-size: 14px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n.colorSvg {\n  width: 10px;\n  height: 10px;\n  overflow: visible;\n  margin-left: 5px;\n}\n\ntr.header td {\n  padding-top: 20px;\n}\n"

/***/ }),

/***/ "./src/app/main/map-tooltip/map-tooltip.component.html":
/***/ (function(module, exports) {

module.exports = "<div  *ngIf=\"content\" class=\"map-tooltip\" id=\"tooltip\" [style.left]=\"pxLeft + 'px'\" [style.top]=\"pxTop + 'px'\" [style.display]=\"display\"\n     [style.transform]=\"transform\">\n  <table>\n    <tr>\n      <td><strong>Strassenname:</strong></td>\n      <td>{{content.streetName}}</td>\n    </tr>\n    <tr>\n      <td><strong>Geschwindigkeitslimite:</strong></td>\n      <td><span class=\"kmh-limit\">{{content.speedLimit}}</span></td>\n    </tr>\n    <tr class=\"header\">\n      <td><strong>Fahrtrichtung 1</strong></td>\n      <td></td>\n    </tr>\n    <tr>\n      <td>Anzahl gemessener Fahrzeuge:</td>\n      <td>\n        {{content.count1}}\n      </td>\n    </tr>\n    <tr>\n      <td>Übertretungsquote:</td>\n      <td>\n        {{content.speedingQuoteDir1 * 100 | number:\"1.2-2\"}}%\n        <svg class=\"colorSvg\"><rect height=\"10\" width=\"10\" [attr.fill]=\"perc2Color(content.speedingQuoteDir1 * 100)\"></rect></svg>\n      </td>\n    </tr>\n    <tr>\n      <td>Durchschnittsgeschwindigkeit:</td>\n      <td>{{content.avgDir1}}&nbsp;km/h</td>\n    </tr>\n    <tr class=\"header\">\n      <td><strong>Fahrtrichtung 2</strong></td>\n    </tr>\n    <tr>\n      <td>Anzahl gemessener Fahrzeuge:</td>\n      <td>\n        {{content.count2}}\n      </td>\n    </tr>\n    <tr>\n      <td>Übertretungsquote:</td>\n      <td>\n        {{content.speedingQuoteDir2 * 100 | number:\"1.2-2\"}}%\n        <svg class=\"colorSvg\"><rect height=\"10\" width=\"10\" [attr.fill]=\"perc2Color(content.speedingQuoteDir2 * 100)\"></rect></svg>\n      </td>\n    </tr>\n    <tr>\n      <td>Durchschnittsgeschwindigkeit:</td>\n      <td>{{content.avgDir2}}&nbsp;km/h</td>\n    </tr>\n    <tr class=\"header\">\n      <td><strong>Letzte Messung:</strong></td>\n      <td>{{content.maxDate | date:'dd.MM.yyyy'}}</td>\n    </tr>\n  </table>\n</div>\n"

/***/ }),

/***/ "./src/app/main/map-tooltip/map-tooltip.component.ts":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__("./node_modules/@angular/core/esm5/core.js");
var color_service_1 = __webpack_require__("./src/app/shared/color.service.ts");
var MapTooltipComponent = /** @class */ (function () {
    function MapTooltipComponent(colorService) {
        this.colorService = colorService;
        this.display = 'none';
        this.transform = '';
        this.TOOLTIP_PX_LEFT = 220;
        this.TOOLTIP_PX_TOP = -200;
    }
    MapTooltipComponent.prototype.ngOnInit = function () {
    };
    MapTooltipComponent.prototype.showTooltip = function (pxLeft, pxTop, radar) {
        this.pxTop = Math.max(pxTop, 50);
        this.pxLeft = pxLeft + this.TOOLTIP_PX_LEFT;
        this.display = 'block';
        this.transform = $('.leaflet-map-pane').css('transform');
        this.content = radar;
    };
    MapTooltipComponent.prototype.hideTooltip = function () {
        this.display = 'none';
    };
    MapTooltipComponent.prototype.perc2Color = function (perc) {
        return this.colorService.perc2color(perc);
    };
    MapTooltipComponent = __decorate([
        core_1.Component({
            selector: 'app-map-tooltip',
            template: __webpack_require__("./src/app/main/map-tooltip/map-tooltip.component.html"),
            styles: [__webpack_require__("./src/app/main/map-tooltip/map-tooltip.component.css")],
        }),
        __metadata("design:paramtypes", [color_service_1.ColorService])
    ], MapTooltipComponent);
    return MapTooltipComponent;
}());
exports.MapTooltipComponent = MapTooltipComponent;


/***/ }),

/***/ "./src/app/main/map-view/map-view.component.css":
/***/ (function(module, exports) {

module.exports = ".container {\n  max-width: none;\n  width: 100%;\n  padding: 0;\n}\n\n.no-margin {\n  margin: 0 !important;\n}\n\n.no-padding {\n  padding: 0 !important;\n}\n\napp-map {\n  position: relative;\n  display: block;\n}\n\n\n"

/***/ }),

/***/ "./src/app/main/map-view/map-view.component.html":
/***/ (function(module, exports) {

module.exports = "<div class=\"container\">\n  <div class=\"row no-margin\">\n    <div class=\"col-12 no-padding\">\n      <app-map [data]=\"data\" (bubbleClickEvent)=\"openDetails($event)\" *ngIf=\"data\"></app-map>\n    </div>\n  </div>\n  <div class=\"row no-margin\">\n    <div class=\"col-12 no-padding\">\n      <!--do not use ngif because that would remove html and we cannot use viewChild method-->\n      <app-map-detail></app-map-detail>\n    </div>\n  </div>\n</div>\n"

/***/ }),

/***/ "./src/app/main/map-view/map-view.component.ts":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__("./node_modules/@angular/core/esm5/core.js");
var map_detail_component_1 = __webpack_require__("./src/app/main/map-detail/map-detail.component.ts");
var radar_service_1 = __webpack_require__("./src/app/shared/radar.service.ts");
var MapViewComponent = /** @class */ (function () {
    function MapViewComponent(radarService) {
        this.radarService = radarService;
    }
    MapViewComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.radarService.getRadarWithAvgSpeedAndSpeedingQuote()
            .subscribe(function (res) {
            _this.data = res;
        }, function (err) { return console.log(err); });
    };
    MapViewComponent.prototype.openDetails = function (radar) {
        this.mapDetailComponent.open(radar);
    };
    MapViewComponent.prototype.open = function () {
        this.mapDetailComponent.open(this.data[0]);
    };
    __decorate([
        core_1.ViewChild(map_detail_component_1.MapDetailComponent),
        __metadata("design:type", map_detail_component_1.MapDetailComponent)
    ], MapViewComponent.prototype, "mapDetailComponent", void 0);
    MapViewComponent = __decorate([
        core_1.Component({
            selector: 'app-map-view',
            template: __webpack_require__("./src/app/main/map-view/map-view.component.html"),
            styles: [__webpack_require__("./src/app/main/map-view/map-view.component.css")]
        }),
        __metadata("design:paramtypes", [radar_service_1.RadarService])
    ], MapViewComponent);
    return MapViewComponent;
}());
exports.MapViewComponent = MapViewComponent;


/***/ }),

/***/ "./src/app/main/map/map.component.css":
/***/ (function(module, exports) {

module.exports = "app-map-tooltip {\n  position: absolute;\n  top: 0;\n  left: 0;\n}\n\n/* Small screen */\n\n/* Used for small screen or phone */\n\n@media (min-width: 576px) {\n  /* default 540px */\n   .container {\n     max-width: 540px;\n  }\n}\n\n/* Medium screen */\n\n/* Used for medium screen or tablet */\n\n@media (min-width: 768px) {\n  /* default 720px */\n  .container {\n  max-width: 720px;\n  }\n}\n\n/* Large screen */\n\n/* Used for large screen, Laptop or Desktop */\n\n@media (min-width: 992px) {\n  /* 960px */\n  .container {\n    max-width: 960px;\n  }\n}\n\n/* Extra large screen */\n\n/* Used for extra large screen or desktop */\n\n@media (min-width: 1200px) {\n  /* default 1140px */\n  .container {\n    max-width: 1140px;\n  }\n}\n\n/* All bigger screens */\n\n@media (min-width: 1400px) {\n  .container {\n    max-width: 1320px;\n  }\n}\n\n/* All bigger screens */\n\n@media (min-width: 1600px) {\n  .container {\n    max-width: 1520px;\n  }\n}"

/***/ }),

/***/ "./src/app/main/map/map.component.html":
/***/ (function(module, exports) {

module.exports = "<div class=\"container\">\n    <div id=\"map\"\n        class=\"w-80\"\n        style=\"height: 500px;\"\n        leaflet\n        [leafletOptions]=\"options\"\n        [leafletLayers]=\"layers\"\n        (leafletMapReady)=\"onMapReady($event)\">\n    </div>\n    <app-map-tooltip></app-map-tooltip>\n</div>\n"

/***/ }),

/***/ "./src/app/main/map/map.component.ts":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__("./node_modules/@angular/core/esm5/core.js");
var leaflet_1 = __webpack_require__("./node_modules/leaflet/dist/leaflet-src.js");
var map_tooltip_component_1 = __webpack_require__("./src/app/main/map-tooltip/map-tooltip.component.ts");
var color_service_1 = __webpack_require__("./src/app/shared/color.service.ts");
var MapComponent = /** @class */ (function () {
    function MapComponent(ref, colorService, zone) {
        this.ref = ref;
        this.colorService = colorService;
        this.zone = zone;
        this.bubbleClickEvent = new core_1.EventEmitter();
        this.circleMarkers = [];
        this.arrowMarkers = [];
        this.map = null;
        this.options = {
            layers: [
                leaflet_1.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { attribution: '...' }),
            ],
            zoom: 14,
            center: leaflet_1.latLng(47.55814, 7.58769)
        };
    }
    MapComponent.prototype.ngOnInit = function () {
        this.createCircleMarkers();
        this.createArrowMarkers();
        this.layers = this.circleMarkers;
    };
    MapComponent.prototype.onMapReady = function (map) {
        this.map = map;
        this.map.setMaxBounds({
            _southWest: { lat: 47.370186632026545, lng: 6.575416289269925 },
            _northEast: { lat: 47.740904422894914, lng: 8.601020537316801 }
        });
        this.map.setMinZoom(10);
        var self = this;
        this.map.on('zoomend', this.onZoom.bind(this, self));
    };
    MapComponent.prototype.onZoom = function (self) {
        if (self.map._zoom >= 15) {
            self.layers = self.arrowMarkers;
        }
        else {
            self.layers = self.circleMarkers;
        }
        self.ref.tick();
    };
    MapComponent.prototype.createCircleMarkers = function () {
        var _this = this;
        var mark;
        var self = this;
        this.data.forEach(function (d, index) {
            var maxSpeed = Math.max(d.speedingQuoteDir1, d.speedingQuoteDir2);
            var color = _this.colorService.perc2color(maxSpeed * 100);
            var i = leaflet_1.divIcon({
                html: "<svg width='12' height='12' class='svg-marker'>\n        <circle cx='7' cy='7' fill=\"" + color + "\" class='circle' r='7' id=circle" + index + "></circle>\n        </svg>"
            });
            mark = leaflet_1.marker([d.lat, d.long], {
                icon: i
            }).on('mouseover', function () {
                self.showPopup(this, self, d);
            }).on('mouseout', function () {
                self.hidePopup();
            }).on('click', function () {
                $('#map').find('.active').removeClass('active');
                $('#circle' + index).addClass('active');
                self.zone.run(function () {
                    self.openDetails(d);
                });
            });
            _this.circleMarkers.push(mark);
        });
    };
    MapComponent.prototype.createArrowMarkers = function () {
        var _this = this;
        var mark;
        var self = this;
        this.data.forEach(function (d, index) {
            var directionDegrees = _this.calculateDirectionDegrees(d);
            // TODO: replace by speeding quote and for two directions
            var color1 = _this.colorService.perc2color(d.speedingQuoteDir1 * 100);
            var color2 = _this.colorService.perc2color(d.speedingQuoteDir2 * 100);
            // create a random ID for marker to ensure unique ids.
            var randomId = Math.floor(Math.random() * Math.floor(100000));
            var i = leaflet_1.divIcon({
                html: "\n        <svg width=\"34px\" height=\"36px\" class=\"arrowSvg\">\n        <defs>\n          <marker id=\"arrow1_" + randomId + "\" markerWidth=\"10\" markerHeight=\"10\" refX=\"0\" refY=\"1.5\" orient=\"auto\" markerUnits=\"strokeWidth\">\n            <path d=\"M0,0 L0,3 L3,1.5 z\" fill=\"" + color1 + "\" />\n          </marker>\n          <marker id=\"arrow2_" + randomId + "\" markerWidth=\"10\" markerHeight=\"10\" refX=\"0\" refY=\"1.5\" orient=\"auto\" markerUnits=\"strokeWidth\">\n            <path d=\"M0,0 L0,3 L3,1.5 z\" fill=\"" + color2 + "\" />\n          </marker>\n          <marker id=\"arrow_black_" + randomId + "\" markerWidth=\"10\" markerHeight=\"10\" refX=\"0.2\" refY=\"1.25\" orient=\"auto\" markerUnits=\"strokeWidth\">\n            <path d=\"M0,0 L0,2.5 L2.5,1.25 z\" fill=\"black\" />\n          </marker>\n        </defs>\n        <g transform=\"rotate(" + directionDegrees + ",17,18)\">\n        <line x1=\"3\" y1=\"10\" x2=\"19\" y2=\"10\" stroke=\"black\" stroke-width=\"6\" marker-end=\"url(#arrow_black_" + randomId + ")\" />\n        <line x1=\"4\" y1=\"10\" x2=\"19\" y2=\"10\" stroke=\"" + color1 + "\" stroke-width=\"4\" marker-end=\"url(#arrow1_" + randomId + ")\" />\n        <line x1=\"31\" y1=\"25\" x2=\"15\" y2=\"25\" stroke=\"black\" stroke-width=\"6\" marker-end=\"url(#arrow_black_" + randomId + ")\" />\n        <line x1=\"30\" y1=\"25\" x2=\"15\" y2=\"25\" stroke=\"" + color2 + "\" stroke-width=\"4\" marker-end=\"url(#arrow2_" + randomId + ")\" />\n        </g>\n      </svg>\n      "
            });
            mark = leaflet_1.marker([d.lat, d.long], {
                icon: i
            }).on('mouseover', function () {
                self.showPopup(this, self, d);
            }).on('mouseout', function () {
                self.hidePopup();
            }).on('click', function () {
                $('#map').find('.active').removeClass('active');
                $('circle' + index).addClass('active');
                self.showPopup(this, self, d);
                self.openDetails(d);
            });
            _this.arrowMarkers.push(mark);
        });
    };
    MapComponent.prototype.showPopup = function (lefletElement, self, radar) {
        // because there is a bug in leaflet callbacks, we have to implement change detection by ourselves
        this.tooltip.showTooltip(this.map.latLngToLayerPoint(lefletElement._latlng).x, this.map.latLngToLayerPoint(lefletElement._latlng).y, radar);
        self.ref.tick();
    };
    MapComponent.prototype.hidePopup = function () {
        this.tooltip.hideTooltip();
        this.ref.tick();
    };
    MapComponent.prototype.openDetails = function (radar) {
        var self = this;
        self.bubbleClickEvent.emit(radar);
    };
    MapComponent.prototype.angleFromCoordinate = function (lat1, lng1, lat2, lng2) {
        var dLon = (lng2 - lng1);
        var y = Math.sin(dLon) * Math.cos(lat2);
        var x = Math.cos(lat1) * Math.sin(lat2) - Math.sin(lat1) * Math.cos(lat2) * Math.cos(dLon);
        var rad = Math.atan2(y, x);
        var brng = rad * 180 / Math.PI;
        return 360 - ((brng + 360) % 360) + 90;
    };
    MapComponent.prototype.calculateDirectionDegrees = function (d) {
        return this.angleFromCoordinate(d.directionOneLat, d.directionOneLong, d.directionTwoLat, d.directionTwoLong);
    };
    __decorate([
        core_1.ViewChild(map_tooltip_component_1.MapTooltipComponent),
        __metadata("design:type", map_tooltip_component_1.MapTooltipComponent)
    ], MapComponent.prototype, "tooltip", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", Array)
    ], MapComponent.prototype, "data", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", core_1.EventEmitter)
    ], MapComponent.prototype, "bubbleClickEvent", void 0);
    MapComponent = __decorate([
        core_1.Component({
            selector: 'app-map',
            template: __webpack_require__("./src/app/main/map/map.component.html"),
            styles: [__webpack_require__("./src/app/main/map/map.component.css")]
        }),
        __metadata("design:paramtypes", [core_1.ApplicationRef,
            color_service_1.ColorService,
            core_1.NgZone])
    ], MapComponent);
    return MapComponent;
}());
exports.MapComponent = MapComponent;


/***/ }),

/***/ "./src/app/main/select-coordinates/select-coordinates.component.css":
/***/ (function(module, exports) {

module.exports = ".colorDiv {\n  height: 15px;\n  width: 15px;\n  float: left;\n  margin-right: 10px;\n  margin-top: 5px;\n}\n\n.colorDiv.red {\n  background-color: red;\n}\n\n.colorDiv.blue {\n  background-color: blue;\n}\n\n.colorDiv.green {\n  background-color: green;\n}\n\n"

/***/ }),

/***/ "./src/app/main/select-coordinates/select-coordinates.component.html":
/***/ (function(module, exports) {

module.exports = "<ng-template #content let-c=\"close\" let-d=\"dismiss\">\n  <div class=\"modal-header\">\n    <!--<h4 class=\"modal-title\">Koordinaten für {{{rowData.streetName}} auswählen</h4>-->\n    <h4 class=\"modal-title\">Koordinaten für Strasse auswählen</h4>\n    <button type=\"button\" class=\"close\" aria-label=\"Close\" (click)=\"d('Cross click')\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body\">\n    <div class=\"row\">\n      <div class=\"col-8\">\n        <div id=\"select-coordinates-map\" style=\"height: 600px;\"\n             leaflet\n             [leafletOptions]=\"options\"\n             [leafletLayers]=\"markers\"\n             (leafletMapReady)=\"onMapReady($event)\">\n        </div>\n      </div>\n      <div class=\"col-4\">\n        <form>\n          <div class=\"row\">\n            <div class=\"col-12 mt-3\">\n              <div class=\"colorDiv red\"></div>\n              <strong>Koordinaten</strong>\n            </div>\n            <div class=\"col-6 mt-2\">\n              <div class=\"form-group\">\n                <label for=\"coordinatesLat\">Breitengrad</label>\n                <input type=\"text\" class=\"form-control\" id=\"coordinatesLat\" placeholder=\"Lat\" [value]=\"coordinates?.lat | number:'.6'\" disabled>\n              </div>\n            </div>\n            <div class=\"col-6 mt-2\">\n              <div class=\"form-group\">\n                <label for=\"coordinatesLong\">Längengrad</label>\n                <input type=\"text\" class=\"form-control\" id=\"coordinatesLong\" placeholder=\"Long\" [value]=\"coordinates?.lng | number:'.6'\" disabled>\n              </div>\n            </div>\n            <div class=\"col-12 mt-3\">\n              <div class=\"colorDiv blue\"></div>\n              <strong>Fahrtrichtung 1</strong>\n              <i> Autos fahren von rot nach blau</i>\n            </div>\n            <div class=\"col-6 mt-2\">\n              <div class=\"form-group\">\n                <label for=\"direction1Lat\">Breitengrad</label>\n                <input type=\"text\" class=\"form-control\" id=\"direction1Lat\" placeholder=\"Lat\" [value]=\"direction1?.lat | number:'.6'\" disabled>\n              </div>\n            </div>\n            <div class=\"col-6 mt-2\">\n              <div class=\"form-group\">\n                <label for=\"direction1Long\">Längengrad</label>\n                <input type=\"text\" class=\"form-control\" id=\"direction1Long\" placeholder=\"Long\" [value]=\"direction1?.lng | number:'.6'\" disabled>\n              </div>\n            </div>\n            <div class=\"col-12 mt-3\">\n              <div class=\"colorDiv green\"></div>\n              <strong>Fahrtrichtung 2</strong>\n              <i> Autos fahren von rot nach grün</i>\n            </div>\n            <div class=\"col-6 mt-2\">\n              <div class=\"form-group\">\n                <label for=\"direction2Lat\">Breitengrad</label>\n                <input type=\"text\" class=\"form-control\" id=\"direction2Lat\" placeholder=\"Lat\" [value]=\"direction2?.lat | number:'.6'\" disabled>\n              </div>\n            </div>\n            <div class=\"col-6 mt-2\">\n              <div class=\"form-group\">\n                <label for=\"direction2Long\">Längengrad</label>\n                <input type=\"text\" class=\"form-control\" id=\"direction2Long\" placeholder=\"Long\" [value]=\"direction2?.lng | number:'.6'\" disabled>\n              </div>\n            </div>\n          </div>\n          <div class=\"row\">\n            <div class=\"col-12\">\n              <button class=\"btn\" (click)=\"deleteEntries()\">Löschen</button>\n              <!--<button class=\"btn btn-primary\" (click)=\"submit()\" [disabled]=\"status !== Status.finished\">Absenden</button>-->\n              <button class=\"btn btn-primary\" (click)=\"submit()\">Absenden</button>\n              <span *ngIf=\"adapted\">&nbsp;Gespeichert</span>\n            </div>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n  <div class=\"modal-footer\">\n    <button type=\"button\" class=\"btn btn-outline-dark\" (click)=\"c('Close click')\">Close</button>\n  </div>\n</ng-template>\n\n<button class=\"btn btn-outline-primary py-0\" (click)=\"onOpen(content)\">{{ coordinatesBtnLabel }}</button>\n\n<!--<hr>-->\n\n<!--<pre>{{closeResult}}</pre>-->\n"

/***/ }),

/***/ "./src/app/main/select-coordinates/select-coordinates.component.ts":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__("./node_modules/@angular/core/esm5/core.js");
var ng_bootstrap_1 = __webpack_require__("./node_modules/@ng-bootstrap/ng-bootstrap/index.js");
var leaflet_1 = __webpack_require__("./node_modules/leaflet/dist/leaflet-src.js");
var radar_service_1 = __webpack_require__("./src/app/shared/radar.service.ts");
var Status;
(function (Status) {
    Status[Status["initial"] = 1] = "initial";
    Status[Status["direction1"] = 2] = "direction1";
    Status[Status["direction2"] = 3] = "direction2";
    Status[Status["finished"] = 4] = "finished";
})(Status || (Status = {}));
var SelectCoordinatesComponent = /** @class */ (function () {
    function SelectCoordinatesComponent(modalService, ref, radarService) {
        this.modalService = modalService;
        this.ref = ref;
        this.radarService = radarService;
        this.open = new core_1.EventEmitter();
        this.options = {};
        this.coordinates = new leaflet_1.LatLng(0, 0);
        this.markers = [];
        this.Status = Status; // copy class to local reference
        this.adapted = false;
        this.coordinatesBtnLabel = 'Ändern';
    }
    SelectCoordinatesComponent.prototype.ngOnInit = function () {
        this.status = Status.initial;
        if (this.rowData.lat === 0 && this.rowData.long === 0) {
            this.coordinatesBtnLabel = 'Hinzufügen';
        }
    };
    // every time we open the map, we have to recreate the options.
    // Otherwise the tiles of leaflet map aren't initialized correctly (blank map)
    SelectCoordinatesComponent.prototype.setOptions = function () {
        this.options = {
            layers: [
                leaflet_1.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 18, attribution: '...' }),
            ],
            zoom: 11,
            center: leaflet_1.latLng(47.55814, 7.58769)
        };
    };
    // open modal and add points to map if coordinates exist
    SelectCoordinatesComponent.prototype.onOpen = function (content) {
        var _this = this;
        this.setOptions();
        this.status = Status.initial;
        this.coordinates = new leaflet_1.LatLng(this.rowData.lat, this.rowData.long);
        this.addCoordinates(this.coordinates);
        this.status = Status.direction1;
        this.direction1 = new leaflet_1.LatLng(this.rowData.directionOneLat, this.rowData.directionOneLong);
        this.addCoordinates(this.direction1);
        this.status = Status.direction2;
        this.direction2 = new leaflet_1.LatLng(this.rowData.directionTwoLat, this.rowData.directionTwoLong);
        this.addCoordinates(this.direction2);
        // set status again to initial after drawing coordinates
        this.status = Status.initial;
        this.modalService.open(content, { windowClass: 'big-modal' }).result.then(function (result) {
            _this.closeResult = "Closed with: " + result;
        }, function (reason) {
            _this.closeResult = "Dismissed " + _this.getDismissReason(reason);
        });
        this.adapted = false;
    };
    SelectCoordinatesComponent.prototype.onMapReady = function (map) {
        var _this = this;
        setTimeout(function () {
            map.invalidateSize();
        }, 0);
        this.map = map;
        this.map.setMaxBounds(this.map.getBounds());
        this.map.setMinZoom(13);
        this.map.on('contextmenu', function (m) {
            _this.addCoordinates(m.latlng);
        });
    };
    SelectCoordinatesComponent.prototype.addCoordinates = function (latLng) {
        if (this.status === Status.finished || !latLng) {
            return null;
        }
        var color;
        switch (this.status) {
            case Status.initial:
                color = 'red';
                this.coordinates = latLng;
                break;
            case Status.direction1:
                color = 'blue';
                this.direction1 = latLng;
                break;
            case Status.direction2:
                color = 'green';
                this.direction2 = latLng;
                break;
        }
        var i = leaflet_1.divIcon({ html: "<svg width='15' height='15' class='svg-marker'>" +
                "<circle cx='7' cy='7' r='7' fill='" + color + "' class='circle'></circle>" +
                "</svg>" });
        var mark = leaflet_1.marker(latLng, {
            icon: i
        });
        this.markers.push(mark);
        this.status++;
        // manually trigger angular changeDetection, because action is called from leaflet
        this.ref.tick();
    };
    SelectCoordinatesComponent.prototype.deleteEntries = function () {
        this.coordinates = null;
        this.direction1 = null;
        this.direction2 = null;
        this.status = 1;
        this.markers = [];
    };
    SelectCoordinatesComponent.prototype.submit = function () {
        var str = this.coordinates.toString() + '\n' +
            this.direction1.toString() + '\n' +
            this.direction2.toString();
        this.rowData.lat = this.coordinates.lat;
        this.rowData.long = this.coordinates.lng;
        this.rowData.directionOneLat = this.direction1.lat;
        this.rowData.directionOneLong = this.direction1.lng;
        this.rowData.directionTwoLat = this.direction2.lat;
        this.rowData.directionTwoLong = this.direction2.lng;
        this.radarService.updateRadar(this.rowData).subscribe();
        this.coordinatesBtnLabel = 'Ändern';
        this.open.emit(this.rowData); // TODO: needed to update component data? Evt. remove
        this.adapted = true;
    };
    SelectCoordinatesComponent.prototype.getDismissReason = function (reason) {
        if (reason === ng_bootstrap_1.ModalDismissReasons.ESC) {
            return 'by pressing ESC';
        }
        else if (reason === ng_bootstrap_1.ModalDismissReasons.BACKDROP_CLICK) {
            return 'by clicking on a backdrop';
        }
        else {
            return "with: " + reason;
        }
    };
    __decorate([
        core_1.Input(),
        __metadata("design:type", Object)
    ], SelectCoordinatesComponent.prototype, "rowData", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", Object)
    ], SelectCoordinatesComponent.prototype, "value", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", core_1.EventEmitter)
    ], SelectCoordinatesComponent.prototype, "open", void 0);
    SelectCoordinatesComponent = __decorate([
        core_1.Component({
            selector: 'app-select-coordinates',
            template: __webpack_require__("./src/app/main/select-coordinates/select-coordinates.component.html"),
            styles: [__webpack_require__("./src/app/main/select-coordinates/select-coordinates.component.css")]
        }),
        __metadata("design:paramtypes", [ng_bootstrap_1.NgbModal,
            core_1.ApplicationRef,
            radar_service_1.RadarService])
    ], SelectCoordinatesComponent);
    return SelectCoordinatesComponent;
}());
exports.SelectCoordinatesComponent = SelectCoordinatesComponent;


/***/ }),

/***/ "./src/app/navbar/navbar.component.css":
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./src/app/navbar/navbar.component.html":
/***/ (function(module, exports) {

module.exports = "<nav class=\"navbar navbar-expand-lg navbar-dark bg-dark\">\n    <a class=\"navbar-brand\" href=\"#\">\n      <img src=\"\" width=\"30\" height=\"30\" alt=\"\">\n      Geschwindigkeitserhebungen des Kantons Basel-Stadt\n    </a>\n    <button class=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarNav\" aria-controls=\"navbarNav\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n      <span class=\"navbar-toggler-icon\"></span>\n    </button>\n    <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\n      <ul class=\"navbar-nav\">\n        <li class=\"nav-item ml-2\" *ngIf=\"admin\">\n          <a class=\"nav-link\"[routerLinkActive]=\"['active']\" [routerLink]=\"['/karte']\">Kartenansicht</a>\n        </li>\n        <li class=\"nav-item ml-2\" *ngIf=\"admin\">\n          <a class=\"nav-link\"[routerLinkActive]=\"['active']\" [routerLink]=\"['/admin']\">Admin</a>\n        </li>\n      </ul>\n    </div>\n  <!-- <div class=\"ml-auto\"> -->\n    <!-- <a href=\"http://www.polizei.bs.ch/\" target=\"_blank\"> -->\n      <!-- <img src=\"../../assets/img/logo_adapted_white.svg\" alt=\"Wappen Basel-Stadt\" style=\"height:50px\"> -->\n    <!-- </a> -->\n  <!-- </div> -->\n</nav>\n"

/***/ }),

/***/ "./src/app/navbar/navbar.component.ts":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__("./node_modules/@angular/core/esm5/core.js");
var NavbarComponent = /** @class */ (function () {
    function NavbarComponent() {
        this.admin = true;
    }
    __decorate([
        core_1.Input(),
        __metadata("design:type", Object)
    ], NavbarComponent.prototype, "admin", void 0);
    NavbarComponent = __decorate([
        core_1.Component({
            selector: 'app-navbar',
            template: __webpack_require__("./src/app/navbar/navbar.component.html"),
            styles: [__webpack_require__("./src/app/navbar/navbar.component.css")]
        }),
        __metadata("design:paramtypes", [])
    ], NavbarComponent);
    return NavbarComponent;
}());
exports.NavbarComponent = NavbarComponent;


/***/ }),

/***/ "./src/app/shared/auth.service.ts":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__("./node_modules/@angular/core/esm5/core.js");
var http_1 = __webpack_require__("./node_modules/@angular/common/esm5/http.js");
var environment_1 = __webpack_require__("./src/environments/environment.ts");
var BehaviorSubject_1 = __webpack_require__("./node_modules/rxjs/_esm5/BehaviorSubject.js");
var AuthService = /** @class */ (function () {
    function AuthService(http) {
        this.http = http;
        this.api = environment_1.environment.api + 'auth/';
        this.adminSource = new BehaviorSubject_1.BehaviorSubject(false);
        this.currentAdminState = this.adminSource.asObservable();
    }
    AuthService.prototype.requestLogin = function () {
        return this.http.get(this.api + 'auth');
    };
    AuthService.prototype.changeAdminState = function (admin) {
        this.adminSource.next(admin);
    };
    AuthService = __decorate([
        core_1.Injectable(),
        __metadata("design:paramtypes", [http_1.HttpClient])
    ], AuthService);
    return AuthService;
}());
exports.AuthService = AuthService;


/***/ }),

/***/ "./src/app/shared/calculator.service.ts":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__("./node_modules/@angular/core/esm5/core.js");
var CalculatorService = /** @class */ (function () {
    function CalculatorService() {
    }
    CalculatorService.prototype.calculateAvgSpeed = function (records, direction) {
        var sum = 0, count = 0;
        records.forEach(function (r) {
            if (r.direction === direction || !direction) {
                count++;
                sum += r.kmh;
            }
        });
        return Math.round(sum / count * 100) / 100;
    };
    CalculatorService = __decorate([
        core_1.Injectable(),
        __metadata("design:paramtypes", [])
    ], CalculatorService);
    return CalculatorService;
}());
exports.CalculatorService = CalculatorService;


/***/ }),

/***/ "./src/app/shared/color.service.ts":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__("./node_modules/@angular/core/esm5/core.js");
var d3_ng2_service_1 = __webpack_require__("./node_modules/d3-ng2-service/index.js");
var ColorService = /** @class */ (function () {
    function ColorService(d3Service) {
        this.d3 = d3Service.getD3();
    }
    // Calculate the color of circles and arrows on the map
    ColorService.prototype.perc2color = function (perc) {
        this.colorScale = this.d3.scaleLinear()
            .domain([0, 11, 25, 100]) // Different colors for 0-10%, 11-25% and 26% up
            .range(['#ffff00', '#ffa500', '#d73027', '#a63027'])
            .interpolate(this.d3.interpolateHcl);
        return this.colorScale(perc);
    };
    ColorService.prototype.perc2color2 = function (avgSpeed, limit) {
        var perc = (avgSpeed / limit) - 1;
        this.colorScale = this.d3.scaleLinear()
            .domain([0, 0.2, 1])
            .range(['#d73027', '#fee08b', '#1a9850'])
            .interpolate(this.d3.interpolateHcl);
        return this.colorScale(perc);
    };
    ColorService.prototype.numberToColor = function (count, countMax) {
        var colorScale = this.d3.scaleLinear()
            .domain([0, countMax])
            .range(['#fcfcff', '#000000'])
            .interpolate(this.d3.interpolateHcl);
        return colorScale(count);
    };
    ColorService.prototype.numberToOpacity = function (count, countMax) {
        var colorScale = this.d3.scaleLinear()
            .domain([0, countMax])
            .range([0, 1]);
        return colorScale(count);
    };
    ColorService = __decorate([
        core_1.Injectable(),
        __metadata("design:paramtypes", [d3_ng2_service_1.D3Service])
    ], ColorService);
    return ColorService;
}());
exports.ColorService = ColorService;


/***/ }),

/***/ "./src/app/shared/data-service.service.ts":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__("./node_modules/@angular/core/esm5/core.js");
var http_1 = __webpack_require__("./node_modules/@angular/common/esm5/http.js");
var DataService = /** @class */ (function () {
    function DataService(http) {
        this.http = http;
        // TODO:remove this
        this.loadSecondData = false;
    }
    DataService.prototype.getMapData = function () {
        return this.http.get('assets/_mockData/data.json');
    };
    DataService.prototype.getDetailData = function () {
        this.loadSecondData = !this.loadSecondData;
        if (!this.loadSecondData) {
            return this.http.get('assets/_mockData/detailData1.json');
        }
        else {
            return this.getDetailData2();
        }
    };
    DataService.prototype.getDetailData2 = function () {
        return this.http.get('assets/_mockData/detailData2.json');
    };
    DataService = __decorate([
        core_1.Injectable(),
        __metadata("design:paramtypes", [http_1.HttpClient])
    ], DataService);
    return DataService;
}());
exports.DataService = DataService;


/***/ }),

/***/ "./src/app/shared/radar.service.ts":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__("./node_modules/@angular/core/esm5/core.js");
var http_1 = __webpack_require__("./node_modules/@angular/common/esm5/http.js");
var environment_1 = __webpack_require__("./src/environments/environment.ts");
var RadarService = /** @class */ (function () {
    function RadarService(http) {
        this.http = http;
        this.api = environment_1.environment.api + 'radar/';
    }
    RadarService.prototype.getRadars = function () {
        return this.http.get(this.api);
    };
    RadarService.prototype.getRadar = function (id) {
        return this.http.get(this.api + id);
    };
    RadarService.prototype.addRadar = function (radar) {
        return this.http.post(this.api + 'addRadar', radar);
    };
    RadarService.prototype.updateRadar = function (radar) {
        return this.http.put(this.api + 'updateRadar', radar);
    };
    RadarService.prototype.deleteRadar = function (radar) {
        return this.http.delete(this.api + radar.id);
    };
    RadarService.prototype.getRadarWithAvgSpeedAndSpeedingQuote = function () {
        return this.http.get(this.api + 'radarWithAvgSpeedAndSpeedingQuote');
    };
    RadarService.prototype.updateRecordCount = function (radar) {
        return this.http.put(this.api + 'updateRecordCount', radar);
    };
    RadarService = __decorate([
        core_1.Injectable(),
        __metadata("design:paramtypes", [http_1.HttpClient])
    ], RadarService);
    return RadarService;
}());
exports.RadarService = RadarService;


/***/ }),

/***/ "./src/app/shared/record.service.ts":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__("./node_modules/@angular/core/esm5/core.js");
var http_1 = __webpack_require__("./node_modules/@angular/common/esm5/http.js");
var environment_1 = __webpack_require__("./src/environments/environment.ts");
var RecordService = /** @class */ (function () {
    function RecordService(http) {
        this.http = http;
        this.api = environment_1.environment.api + 'record/';
    }
    RecordService.prototype.getRecords = function () {
        return this.http.get(this.api);
    };
    RecordService.prototype.getRecord = function (id) {
        return this.http.get(this.api + id);
    };
    RecordService.prototype.getMeasurementWeeks = function (radarId, direction) {
        return this.http.get(this.api + ("measurementWeeks?radarId=" + radarId + "&direction=" + direction));
    };
    RecordService.prototype.addRecords = function (records) {
        return this.http.post(this.api + 'addRecords', records);
    };
    RecordService.prototype.getRecordsForWeeklyView = function (radarId, direction, startDay, endDay) {
        return this.http.get(this.api + ("recordForWeeklyView?radarId=" + radarId + "&direction=" + direction + "&startDay=" + startDay + "&endDay=" + endDay));
    };
    RecordService.prototype.getRecordsForDailyView = function (radarId, direction, startDay, endDay) {
        return this.http.get(this.api + ("recordForDailyView?radarId=" + radarId + "&direction=" + direction + "&startDay=" + startDay + "&endDay=" + endDay));
    };
    RecordService.prototype.updateRecord = function (record) {
        return this.http.patch(this.api + record.id, record);
    };
    RecordService.prototype.deleteRecord = function (record) {
        return this.http.delete(this.api + record.id);
    };
    RecordService = __decorate([
        core_1.Injectable(),
        __metadata("design:paramtypes", [http_1.HttpClient])
    ], RecordService);
    return RecordService;
}());
exports.RecordService = RecordService;


/***/ }),

/***/ "./src/app/shared/sails-client.service.ts":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__("./node_modules/@angular/core/esm5/core.js");
var angular2_sails_1 = __webpack_require__("./node_modules/angular2-sails/index.js");
var operators_1 = __webpack_require__("./node_modules/rxjs/_esm5/operators.js");
var SailsClientService = /** @class */ (function () {
    function SailsClientService(sailsService) {
        this.sailsService = sailsService;
    }
    SailsClientService.prototype.request = function (options) {
        return this.sailsService.request(options)
            .pipe(operators_1.map(function (res) { return (res).data; }));
    };
    SailsClientService.prototype.get = function (url, data, headers) {
        var options = { url: url, data: data, headers: headers, method: 'get' };
        return this.request(options);
    };
    SailsClientService.prototype.post = function (url, data, headers) {
        var options = { url: url, data: data, headers: headers, method: 'post' };
        return this.request(options);
    };
    SailsClientService.prototype.patch = function (url, data, headers) {
        var options = { url: url, data: data, headers: headers, method: 'patch' };
        return this.request(options);
    };
    SailsClientService.prototype.delete = function (url, headers) {
        var options = { url: url, headers: headers, method: 'delete' };
        return this.request(options);
    };
    /**
   * Listen to Socket events
   * @param event Socket event name
   */
    SailsClientService.prototype.on = function (event) {
        return this.sailsService.on(event)
            .pipe(operators_1.map(function (res) { return (res).data; }));
    };
    // bc(event): Observable<any> {
    //   return this.on(event);
    // }
    /**
     * Unsubscribe from each connected socket room
     */
    SailsClientService.prototype.off = function () {
        return this.post('/Recrod/socket/off', {});
    };
    SailsClientService = __decorate([
        core_1.Injectable(),
        __metadata("design:paramtypes", [angular2_sails_1.SailsService])
    ], SailsClientService);
    return SailsClientService;
}());
exports.SailsClientService = SailsClientService;


/***/ }),

/***/ "./src/environments/environment.ts":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// The file contents for the current environment will overwrite these during build.
// The build system defaults to the dev environment which uses `environment.ts`, but if you do
// `ng build --env=prod` then `environment.prod.ts` will be used instead.
// The list of which env maps to which file can be found in `.angular-cli.json`.
Object.defineProperty(exports, "__esModule", { value: true });
exports.environment = {
    production: false,
    api: '/api/'
};


/***/ }),

/***/ "./src/main.ts":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__("./node_modules/@angular/core/esm5/core.js");
var platform_browser_dynamic_1 = __webpack_require__("./node_modules/@angular/platform-browser-dynamic/esm5/platform-browser-dynamic.js");
var app_module_1 = __webpack_require__("./src/app/app.module.ts");
var environment_1 = __webpack_require__("./src/environments/environment.ts");
if (environment_1.environment.production) {
    core_1.enableProdMode();
}
platform_browser_dynamic_1.platformBrowserDynamic().bootstrapModule(app_module_1.AppModule)
    .catch(function (err) { return console.log(err); });


/***/ }),

/***/ 0:
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__("./src/main.ts");


/***/ })

},[0]);
//# sourceMappingURL=main.bundle.js.map